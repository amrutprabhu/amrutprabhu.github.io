{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var u=Object.create;var o=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var l=a=>o(a,\"__esModule\",{value:!0});var N=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports),y=(a,t)=>{l(a);for(var s in t)o(a,s,{get:t[s],enumerable:!0})},f=(a,t,s)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let n of p(t))!g.call(a,n)&&n!==\"default\"&&o(a,n,{get:()=>t[n],enumerable:!(s=m(t,n))||s.enumerable});return a},w=a=>f(l(o(a!=null?u(k(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var d=N((C,r)=>{r.exports=_jsx_runtime});var v={};y(v,{default:()=>x,frontmatter:()=>b});var e=w(d()),b={title:\"Kind - A New Kubernetes Cluster\",author:\"Amrut Prabhu\",categories:\"\",tags:[\"kubernetes\",\"Java\"],image:\"kind/kind-kubernetes.png\",\"photo-credits\":null,\"applaud-link\":\"kind-kubernetes-cluster.json\",date:\"2021-05-13\",draft:!1,summary:\"Here we explore how to create a kubernetes cluster on your local machine\",imageUrl:\"/static/images/2021/kind/kind-kubernetes.png\",actualUrl:\"auto-generated\",customUrl:\"auto-generated\"};function I(a={}){let{wrapper:t}=a.components||{};return t?(0,e.jsx)(t,Object.assign({},a,{children:(0,e.jsx)(s,{})})):s();function s(){let n=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",div:\"div\",pre:\"pre\",code:\"code\"},a.components),{AdsFlows:c,Image:i}=n;return c||h(\"AdsFlows\",!0),i||h(\"Image\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"Recently I wanted to experiment with something on a Kubernetes cluster, and I didn't want to spin up a new cluster on AWS and wanted something quick.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Till now, Minikube was the only thing I was using as a local Kubernetes cluster. But I start noticing performance degradation on my system as soon as I started using Minikube.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"I came across another local Kubernetes cluster called \",(0,e.jsx)(n.a,{href:\"https://kind.sigs.k8s.io/\",children:\"Kind\"}),\" and I want to share my learnings about it.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"introduction\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#introduction\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Introduction\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://kind.sigs.k8s.io/\",children:\"Kind\"}),\" is a command-line tool that helps you to create a local Kubernetes cluster. It creates a cluster using docker images and it mimics a Kubernetes cluster on your local system.\"]}),`\n`,(0,e.jsx)(c,{id:\"adflow1\",slot:\"8168941152\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"minikube-vs-kind\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#minikube-vs-kind\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Minikube vs Kind.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"The latest version of Minikube uses docker images to create the cluster, But it requires at least 1.8 GB of memory to start. With Kind, I could start the cluster with just 1 GB and could deploy a simple pod that hardly consumed 200 MB of memory.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(i,{alt:\"Kubernetes Single node cluster\",src:\"/static/images/2021/kind/single-node.png\",width:\"1568\",height:\"290\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"creating-a-cluster\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#creating-a-cluster\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Creating a cluster\"]}),`\n`,(0,e.jsx)(n.p,{children:\"To create a cluster just run the following command\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-commandline code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`Kind create cluster\n`})})}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(i,{alt:\"Kind create cluster\",src:\"/static/images/2021/kind/kind-create-cluster.png\",width:\"1406\",height:\"484\"})}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`kind create cluster --name kind-cluster-2\n`})})}),`\n`,(0,e.jsx)(n.p,{children:\"You can also spin up multiple clusters using kind. You just need to specify a different name while creating the cluster.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"creating-pod-with-custom-docker-images\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#creating-pod-with-custom-docker-images\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Creating Pod with Custom Docker Images.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"To load a custom image you created on your machine, You don\\u2019t need to push the image to any repository. Rather just use the following command to load your custom image in the cluster.\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`Kind load docker-image <custom-image>:<tag>\n`})})}),`\n`,(0,e.jsx)(n.p,{children:\"Once it\\u2019s loaded, You can then reference the image directly in your Kubernetes deployment configuration file or you could also deploy a helm chart containing the custom image without the need to specify any image repository.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(i,{alt:\"Loading Custom Docker Image\",src:\"/static/images/2021/kind/custom-docker-image.png\",width:\"1428\",height:\"426\"})}),`\n`,(0,e.jsx)(c,{id:\"adflow2\",slot:\"2393870295\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"multi-node-cluster\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#multi-node-cluster\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Multi-Node Cluster\"]}),`\n`,(0,e.jsx)(n.p,{children:\"This feature was fascinating to me, If you want to create a multi-node cluster, you can provide config to create it.\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`Kind create cluster --config config.yml\n`})})}),`\n`,(0,e.jsx)(n.p,{children:\"Let\\u2019s have a look at the config.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yml\",children:(0,e.jsxs)(n.code,{className:\"language-yml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Cluster\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" kind.x\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`k8s.io/v1alpha4\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"nodes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"role\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" control\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`plane\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"role\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` worker\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"role\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` worker\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"I have asked it to create a cluster with a control plane and two worker nodes in this config.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now, you can further customize this to map node ports to your host port. This would be helpful in a situation wherein say you have \",(0,e.jsx)(n.code,{children:\"NodePort\"}),\" service, and you want to access it directly from your local system.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yml\",children:(0,e.jsxs)(n.code,{className:\"language-yml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Cluster\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" kind.x\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`k8s.io/v1alpha4\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"nodes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"role\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" control\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`plane\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"role\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` worker\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"extraPortMappings\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"containerPort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"80\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"hostPort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8080\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"custom-worker-node-images\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#custom-worker-node-images\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Custom Worker Node images.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Since Kind works with docker images, You can specify a custom docker image that you would like to run. Currently, it uses the docker images provided by kind. This means you can provide a specific version of Kubernetes that you would like to run, just by changing the image tag. You can find all the Kind images \",(0,e.jsx)(n.a,{href:\"https://hub.docker.com/r/kindest/node\",children:\"here\"}),\").\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yml\",children:(0,e.jsxs)(n.code,{className:\"language-yml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Cluster\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" kind.x\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`k8s.io/v1alpha4\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"nodes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"role\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" control\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`plane\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"role\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` worker\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" kindest/node\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`v1.16.4\n`]})]})}),`\n`,(0,e.jsx)(c,{id:\"adflow3\",slot:\"1404222257\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"auto-completion\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#auto-completion\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Auto Completion\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Kind also provides functions that will allow your terminal to autocomplete your commands. This depends on the shell you use. Currently, it supports functions for Bash, ZSH (also oh-myzsh), and Fish shell. You can get these functions by using the following command.\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`kind completion zsh\n`})})}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(i,{alt:\"Kind AutoComplete\",src:\"/static/images/2021/kind/kind-auto-complete.png\",width:\"1274\",height:\"402\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"If you want to know more on how to configure auto-completion with ZSH you can refer to the repo documentation \",(0,e.jsx)(n.a,{href:\"https://github.com/zsh-users/zsh-completions\",children:\"here\"})]}),`\n`,(0,e.jsxs)(n.h2,{id:\"conclusion\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#conclusion\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),`\n`,(0,e.jsx)(n.p,{children:\"After exploring Kind, I found it pretty simple and straightforward. The major benefit I found is that I can customize the cluster\\u2019s configuration the way I want and I don\\u2019t have to worry about performance degrade compared to Minikube.\"})]})}}var x=I;function h(a,t){throw new Error(\"Expected \"+(t?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return v;})();\n;return Component;","toc":[{"value":"Introduction","url":"#introduction","depth":2},{"value":"Minikube vs Kind.","url":"#minikube-vs-kind","depth":2},{"value":"Creating a cluster","url":"#creating-a-cluster","depth":2},{"value":"Creating Pod with Custom Docker Images.","url":"#creating-pod-with-custom-docker-images","depth":2},{"value":"Multi-Node Cluster","url":"#multi-node-cluster","depth":2},{"value":"Custom Worker Node images.","url":"#custom-worker-node-images","depth":2},{"value":"Auto Completion","url":"#auto-completion","depth":2},{"value":"Conclusion","url":"#conclusion","depth":2}],"frontMatter":{"readingTime":{"text":"4 min read","minutes":3.87,"time":232200,"words":774},"slug":"2020/kind-kubernetes-cluster","fileName":"2020/kind-kubernetes-cluster.md","title":"Kind - A New Kubernetes Cluster","author":"Amrut Prabhu","categories":"","tags":["kubernetes","Java"],"image":"kind/kind-kubernetes.png","photo-credits":null,"applaud-link":"kind-kubernetes-cluster.json","date":"2021-05-13T00:00:00.000Z","draft":false,"summary":"Here we explore how to create a kubernetes cluster on your local machine","imageUrl":"/static/images/2021/kind/kind-kubernetes.png","actualUrl":"2020/kind-kubernetes-cluster","customUrl":"kind-kubernetes-cluster"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.875,"time":52500,"words":175},"slug":["default"],"fileName":"default.md","name":"Amrut Prabhu","avatar":"/static/images/avatar-small.jpg","avatarBig":"/static/images/avatar-big.jpg","occupation":"Staff Engineer","company":"Personal","email":"contact@refactorfirst.com","twitter":"https://twitter.com/amrutprabhu42","linkedin":"https://www.linkedin.com/in/amrut-prabhu-722baa65/","github":"https://github.com/amrutprabhu","customUrl":"default","actualUrl":"default","date":null}],"prev":{"title":"Apache Airflow 2.0: A Practical Jump Start","author":"Amrut Prabhu","categories":"","tags":["python","airflow","Java"],"image":"airflow/airflow-cover.jpg","photo-credits":"https://unsplash.com/photos/BpEOwR57QEg","applaud-link":"apache-airflow-2-0-practical-jump-start.json","date":"2021-04-28T00:00:00.000Z","draft":false,"summary":"In this article, I would like to give you a jump-start to understand the basic concepts and create a workflow pipeline from scratch.","imageUrl":"/static/images/2021/airflow/airflow-cover.jpg","actualUrl":"2020/apache-airflow-2-0-practical-jump-start","customUrl":"apache-airflow-2-0-practical-jump-start","slug":"apache-airflow-2-0-practical-jump-start"},"next":{"title":"What are Java Records","author":"Amrut Prabhu","categories":"","tags":["Spring Boot","Java"],"image":"java-records/java-records-title.jpg","photo-credits":"https://unsplash.com/photos/3vXOHr_fMi8","applaud-link":"java-16-records.json","date":"2021-05-27T00:00:00.000Z","draft":false,"summary":"Here we look into What are Java Record and its uses","imageUrl":"/static/images/2021/java-records/java-records-title.jpg","actualUrl":"2020/what-are-java-records-in-java-16","customUrl":"what-are-java-records-in-java-16","slug":"what-are-java-records-in-java-16"}},"__N_SSG":true}