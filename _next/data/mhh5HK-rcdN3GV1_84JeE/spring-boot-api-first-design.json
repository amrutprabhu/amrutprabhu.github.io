{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var d=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var o=a=>i(a,\"__esModule\",{value:!0});var g=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports),N=(a,t)=>{o(a);for(var s in t)i(a,s,{get:t[s],enumerable:!0})},k=(a,t,s)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let n of h(t))!m.call(a,n)&&n!==\"default\"&&i(a,n,{get:()=>t[n],enumerable:!(s=p(t,n))||s.enumerable});return a},f=a=>k(o(i(a!=null?d(u(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var r=g((P,l)=>{l.exports=_jsx_runtime});var b={};N(b,{default:()=>w,frontmatter:()=>I});var e=f(r()),I={title:\"Spring Boot: API First Design\",author:\"Amrut Prabhu\",categories:\"\",tags:[\"Spring Boot\",\"Java\",\"Open API 3\",\"Swagger\"],image:\"blog-api-first/cover.jpg\",\"photo-credits\":\"https://unsplash.com/photos/bb-ys3oFql4\",\"applaud-link\":\"spring-boot-api-first-design.json\",date:\"2021-03-21\",draft:!1,summary:\"Here we take a practical approach to API first design with an example using Open API 3 specification\",imageUrl:\"/static/images/2021/blog-api-first/cover.jpg\",actualUrl:\"auto-generated\",customUrl:\"auto-generated\"};function v(a={}){let{wrapper:t}=a.components||{};return t?(0,e.jsx)(t,Object.assign({},a,{children:(0,e.jsx)(s,{})})):s();function s(){let n=Object.assign({p:\"p\",h1:\"h1\",a:\"a\",span:\"span\",h2:\"h2\",div:\"div\",code:\"code\",pre:\"pre\",ul:\"ul\",li:\"li\"},a.components),{Image:c}=n;return c||y(\"Image\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"In this blog, I take a practical approach to API first design with an example using Open API 3 specification.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Firstly, I describe how I created the API definition, then how I created the server and the client code from the API definition. Then I will talk about some of the problems I faced.\"}),`\n`,(0,e.jsxs)(n.h1,{id:\"advantages-of-api-first-approach\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#advantages-of-api-first-approach\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Advantages of API First Approach\"]}),`\n`,(0,e.jsx)(n.p,{children:\"As we are adopting microservice-based architectures, API first approach has been gaining some traction. There are quite many advantages to using API first approach and I will discuss a few of them.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"clear-contract-definition\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#clear-contract-definition\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Clear Contract Definition\"]}),`\n`,(0,e.jsx)(n.p,{children:\"With API first approach, you can create a concrete contract with which you can set clear goals on what will be provided by your application. It also helps to decouple your implementation from the Interface you provide via the API.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"well-documented-api\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#well-documented-api\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Well Documented API\"]}),`\n`,(0,e.jsx)(n.p,{children:\"You follow well-structured documentation of the API you are providing and it helps stakeholders to have a clear understanding of the interface you are providing via your APIs in a human-readable format.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"promotes-development-in-parallel\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#promotes-development-in-parallel\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Promotes Development in Parallel\"]}),`\n`,(0,e.jsx)(n.p,{children:\"This is one of the advantages that I really love is that the producer and consumer of the API can work in parallel once you have the API definition in place. The Consumer can easily create mocks with the already agreed API contract and start their end of the development.\"}),`\n`,(0,e.jsxs)(n.h1,{id:\"lets-get-started\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#lets-get-started\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Let\\u2019s Get Started!\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"To start off, I went to \",(0,e.jsx)(n.a,{href:\"https://editor.swagger.io/\",children:\"https://editor.swagger.io/\"}),\" and created my API definition. I used the Open API 3 specification to create the API definition. There are many other tools to create your API definition, but I choose this as I was familiar with creating Swagger API documentation in Java. I used this online editor as it provides an auto-complete feature (with ctrl + space) depending on the context you are in. This helped me a lot to create the API definition.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"However, I am not a fluent API definition creator, So I learned the way to define the API using the \",(0,e.jsx)(n.a,{href:\"https://github.com/OAI/OpenAPI-Specification/blob/master/examples/v3.0/petstore.yaml\",children:\"petstore\"}),\" API definition example.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"To get started, I created a very minimal API definition in which I can create an account using a post request.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(c,{alt:\"API definition\",src:\"/static/images/2021/blog-api-first/api-definition.png\",width:\"616\",height:\"619\"})}),`\n`,(0,e.jsxs)(n.h1,{id:\"generating-code\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#generating-code\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Generating Code\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"With the API definition all set, let\\u2019s start with creating the server and client of the API. For this, I created a spring boot application which I created normally via \",(0,e.jsx)(n.a,{href:\"https://start.spring.io/\",children:\"https://start.spring.io\"}),\". The only dependency I added here was \",(0,e.jsx)(n.code,{children:\"spring-web\"}),\" .\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Next, I used the \",(0,e.jsx)(n.a,{href:\"https://openapi-generator.tech/\",children:\"Open API Generator\"}),\" Maven plugin to create the server and the client for me. Let\\u2019s see how to do that.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"server-side-code-generation\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#server-side-code-generation\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Server-side Code Generation\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"To create the server-side code from the API definition, I added the \",(0,e.jsx)(n.a,{href:\"https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin\",children:\"Open API generator plugin\"}),\" and provided it with the API definition file. Since I am creating a server based on spring, I provided a generation type \",(0,e.jsx)(n.code,{children:\"spring\"}),\", So that it knows it can use spring classes to create my server code. There are quite a few server code generators that you can find \",(0,e.jsx)(n.a,{href:\"https://openapi-generator.tech/docs/generators/README#server-generators\",children:\"here\"}),\". Now, let's look at what the plugin config looks like:\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(c,{alt:\"Open api 3 maven plugin\",src:\"/static/images/2021/blog-api-first/openapi-maven-plugin.png\",width:\"887\",height:\"539\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Some of the customization options I used here were, which package name to use to create my API and model classes. There are quite a few other options you can specify. E.g., you can define what your model class names can be pre-appended with and you can find the various other options on their \",(0,e.jsx)(n.a,{href:\"https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin\",children:\"GitHub link\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Now, the code that gets generated from the plugin requires a few more dependencies for it to compile successfully. I exactly found the minimal set I needed and added the following dependencies.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-xml\",children:(0,e.jsxs)(n.code,{className:\"language-xml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"javax.validation\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"validation-api\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"io.springfox\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"springfox-swagger2\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"${springfox-version}\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"org.openapitools\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"jackson-databind-nullable\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"${jackson-databind-nullable}\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"io.swagger.core.v3\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"swagger-annotations\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"${swagger-annotations-version}\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now comes the main part, i.e., generating the code. After building the code using \",(0,e.jsx)(n.code,{children:\"mvn clean verify\"}),\", there were a few classes that got generated.\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(c,{alt:\"openapi server side code\",src:\"/static/images/2021/blog-api-first/openapi-server-side-code.png\",width:\"406\",height:\"389\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"In the API package, there were two main interfaces, \",(0,e.jsx)(n.code,{children:\"AccountApi\"}),\" and \",(0,e.jsx)(n.code,{children:\"AccountApiDeligate\"}),\" . The \",(0,e.jsx)(n.code,{children:\"AccountApi\"}),\" interface contains the actual definition of the API using \",(0,e.jsx)(n.code,{children:\"@postmapping\"}),\" annotation and it also contains the required API documentation using spring swagger annotations. Its implementation class is \",(0,e.jsx)(n.code,{children:\"AccountApiController\"}),\" which calls the delegated service.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"The important interface for you is the \",(0,e.jsx)(n.code,{children:\"AccountApiDelegate\"}),\" interface. This provides a delegate service pattern, which allows you to provide the implementation of what needs to be handled or done when the API is called. Here you put in your business logic that handles the request. Once you implement the service delegate, you are actually ready to serve requests.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"That\\u2019s it, you are done with the server-side. Next, the Client.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"client-code-generation\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#client-code-generation\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Client Code Generation\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"For the client-side code generation, I use the same plugin, but this time with the generator name as \",(0,e.jsx)(n.code,{children:\"java\"}),\".\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(c,{alt:\"openapi client side maven plugin\",src:\"/static/images/2021/blog-api-first/openapi-client-side-maven-plugin.png\",width:\"1550\",height:\"1096\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"I also provide some config properties, Like the library to use for making the rest client. Here I wanted it to use \",(0,e.jsx)(n.code,{children:\"restemplate\"}),\" for making the calls to the server. There are quite a few options you can configure that you can find from their documentation \",(0,e.jsx)(n.a,{href:\"https://openapi-generator.tech/docs/generators/java\",children:\"here\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:\"You would also require some more dependencies to help you compile the generated code.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-xml\",children:(0,e.jsxs)(n.code,{className:\"language-xml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"com.google.code.gson\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"gson\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"${gson.version}\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"io.swagger.core.v3\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"swagger-annotations\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"${swagger-annotations-version}\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"io.springfox\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"springfox-swagger2\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"${springfox-version}\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"com.squareup.okhttp3\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"okhttp\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"${okhttp.version}\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"com.google.code.findbugs\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"groupId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"jsr305\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"artifactId\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t   \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"${jsr305.version}\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"version\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"dependency\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]})]})}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(c,{alt:\"openapi client side code\",src:\"/static/images/2021/blog-api-first/openapi-client-side-code.png\",width:\"318\",height:\"291\"})}),`\n`,(0,e.jsx)(n.p,{children:\"After the code generation, You can find classes that provide you how to configure the client to talk to the server. It also provides some basic authentication, using bearer token or basic auth.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now you need to create an instance/bean of the \",(0,e.jsx)(n.code,{children:\"ApiClient\"}),\" . This contains the host config of the server you want to communicate. This is then used in the \",(0,e.jsx)(n.code,{children:\"AccountApi\"}),\" class to help you make requests to the server. To make a request, you would only have to call the API function from the \",(0,e.jsx)(n.code,{children:\"AccountApi\"}),\" class.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"There we have it now. You have successfully generated the client code and you can now check the interaction between the client and the server.\"}),`\n`,(0,e.jsxs)(n.h1,{id:\"problems-i-encountered\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#problems-i-encountered\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Problems I Encountered\"]}),`\n`,(0,e.jsx)(n.p,{children:\"There are quite a few bugs in the latest version of the plugin that I was using (5.0.1).\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"For \",(0,e.jsx)(n.code,{children:\"spring\"}),\" generator, there is some unused imports from spring data that get added by the generator while creating the controller. Hence you would have to add spring data dependency, Even if you not using a database with the service. This may not be a big problem, because mostly you would have a database that you connect to with your service. You can check the current open bug \",(0,e.jsx)(n.a,{href:\"https://github.com/OpenAPITools/openapi-generator/issues/8360\",children:\"here\"}),\".\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Usually, you would define the schema for request and response in the \",(0,e.jsx)(n.code,{children:\"components\"}),\" section of the API definition file and then use the reference to these schemas in the API using the \",(0,e.jsx)(n.code,{children:\"$ref:\"}),\" property. This is currently not working as excepted. The way to get around it was to define the inline schema for each request and response. Hence the model names get generated with a prefix \",(0,e.jsx)(n.code,{children:\"Inline*\"}),\" . You can track this bug \",(0,e.jsx)(n.a,{href:\"https://github.com/OpenAPITools/openapi-generator/issues/7922\",children:\"here\"}),\".\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"If you use the older version, i.e, \",(0,e.jsx)(n.code,{children:\"4.3.1\"}),\" ; it's free from these bugs and the plugin works well as expected.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"As usual, I have uploaded the code to \",(0,e.jsx)(n.a,{href:\"https://github.com/amrutprabhu/spring-boot-api-first-approach\",children:\"GitHub\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Enjoy!!\"})]})}}var w=v;function y(a,t){throw new Error(\"Expected \"+(t?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return b;})();\n;return Component;","toc":[{"value":"Advantages of API First Approach","url":"#advantages-of-api-first-approach","depth":1},{"value":"Clear Contract Definition","url":"#clear-contract-definition","depth":2},{"value":"Well Documented API","url":"#well-documented-api","depth":2},{"value":"Promotes Development in Parallel","url":"#promotes-development-in-parallel","depth":2},{"value":"Let’s Get Started!","url":"#lets-get-started","depth":1},{"value":"Generating Code","url":"#generating-code","depth":1},{"value":"Server-side Code Generation","url":"#server-side-code-generation","depth":2},{"value":"Client Code Generation","url":"#client-code-generation","depth":2},{"value":"Problems I Encountered","url":"#problems-i-encountered","depth":1}],"frontMatter":{"readingTime":{"text":"8 min read","minutes":7.985,"time":479100,"words":1597},"slug":"2020/spring-boot-api-first-design","fileName":"2020/spring-boot-api-first-design.md","title":"Spring Boot: API First Design","author":"Amrut Prabhu","categories":"","tags":["Spring Boot","Java","Open API 3","Swagger"],"image":"blog-api-first/cover.jpg","photo-credits":"https://unsplash.com/photos/bb-ys3oFql4","applaud-link":"spring-boot-api-first-design.json","date":"2021-03-21T00:00:00.000Z","draft":false,"summary":"Here we take a practical approach to API first design with an example using Open API 3 specification","imageUrl":"/static/images/2021/blog-api-first/cover.jpg","actualUrl":"2020/spring-boot-api-first-design","customUrl":"spring-boot-api-first-design"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.875,"time":52500,"words":175},"slug":["default"],"fileName":"default.md","name":"Amrut Prabhu","avatar":"/static/images/avatar-small.jpg","avatarBig":"/static/images/avatar-big.jpg","occupation":"Staff Engineer","company":"Personal","email":"address@yoursite.com","twitter":"https://twitter.com/amrutprabhu42","linkedin":"https://www.linkedin.com/in/amrut-prabhu-722baa65/","github":"https://github.com/amrutprabhu","customUrl":"default","actualUrl":"default","date":null}],"prev":{"title":"Spring Boot: Boost JPA Bulk Insert Performance by 100x","author":"Amrut Prabhu","categories":"","tags":["JPA","mysql","database","Spring Boot","Java"],"image":"2021-01-24/jpa-performance-boost.jpg","photo-credits":"https://unsplash.com/photos/V6G6PZWPASo","applaud-link":"spring-boot-boost-jpa-insert.json","date":"2021-01-24T00:00:00.000Z","draft":false,"summary":"Here we see how we can boost the bulk insert performance using JPA to insert large number of records into a database","imageUrl":"/static/images/2021/boost-jpa-bulk-insert/jpa-performance-boost.jpg","actualUrl":"2020/spring-boot-boost-jpa-bulk-insert-performance-by-100x","customUrl":"spring-boot-boost-jpa-bulk-insert-performance-by-100x","slug":"spring-boot-boost-jpa-bulk-insert-performance-by-100x"},"next":{"title":"Apache Airflow 2.0: A Practical Jump Start","author":"Amrut Prabhu","categories":"","tags":["python","airflow","Java"],"image":"airflow/airflow-cover.jpg","photo-credits":"https://unsplash.com/photos/BpEOwR57QEg","applaud-link":"apache-airflow-2-0-practical-jump-start.json","date":"2021-04-28T00:00:00.000Z","draft":false,"summary":"In this article, I would like to give you a jump-start to understand the basic concepts and create a workflow pipeline from scratch.","imageUrl":"/static/images/2021/airflow/airflow-cover.jpg","actualUrl":"2020/apache-airflow-2-0-practical-jump-start","customUrl":"apache-airflow-2-0-practical-jump-start","slug":"apache-airflow-2-0-practical-jump-start"}},"__N_SSG":true}