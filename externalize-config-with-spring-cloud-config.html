<!DOCTYPE html><html lang="en"><head><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/icon.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/icon.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');d.add('light');if("system"===e||(!e&&false)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="amrutprabhu" data-description="Support me on Buy me a coffee!" data-message="" data-color="#FFDD00" data-position="Right" data-x_margin="18" data-y_margin="18" strategy="afterInteractive" async=""></script><title>Externalizing Application Configuration With Spring Cloud Config | RefactorFirst</title><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7490174059724719" crossorigin="anonymous"></script><meta name="robots" content="follow, index"/><meta name="description" content="In this article, we would be looking at how we can externalize application configuration using Spring Cloud Config."/><meta property="og:url" content="https://refactorfirst.com/externalize-config-with-spring-cloud-config"/><meta property="og:type" content="article"/><meta property="og:site_name" content="RefactorFirst"/><meta property="og:description" content="In this article, we would be looking at how we can externalize application configuration using Spring Cloud Config."/><meta property="og:title" content="Externalizing Application Configuration With Spring Cloud Config"/><meta property="og:image" content="https://refactorfirst.com/static/images/2021/spring-cloud-config-server-git-backend/cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://twitter.com/amrutprabhu42"/><meta name="twitter:title" content="Externalizing Application Configuration With Spring Cloud Config"/><meta name="twitter:description" content="In this article, we would be looking at how we can externalize application configuration using Spring Cloud Config."/><meta name="twitter:image" content="https://refactorfirst.com/static/images/2021/spring-cloud-config-server-git-backend/cover.jpg"/><meta property="article:published_time" content="2021-10-14T00:00:00.000Z"/><link rel="canonical" href="https://refactorfirst.com/externalize-config-with-spring-cloud-config"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://refactorfirst.com/externalize-config-with-spring-cloud-config"
  },
  "headline": "Externalizing Application Configuration With Spring Cloud Config",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://refactorfirst.com/static/images/2021/spring-cloud-config-server-git-backend/cover.jpg"
    }
  ],
  "datePublished": "2021-10-14T00:00:00.000Z",
  "dateModified": "2021-10-14T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Amrut Prabhu"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Amrut Prabhu",
    "logo": {
      "@type": "ImageObject",
      "url": "https://refactorfirst.com/static/images/favicons/icon.png"
    }
  },
  "description": "In this article, we would be looking at how we can externalize application configuration using Spring Cloud Config."
}</script><meta name="next-head-count" content="22"/><link rel="preload" href="/_next/static/css/8e0c0b17a6c6bae5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e0c0b17a6c6bae5.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-cf23d9cda6584f61.js" defer=""></script><script src="/_next/static/chunks/main-a8532ea7c2505ecc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e6b9cc79d27c0c8f.js" defer=""></script><script src="/_next/static/chunks/framework-327e104994690a53.js" defer=""></script><script src="/_next/static/chunks/207-4f91422181f853c0.js" defer=""></script><script src="/_next/static/chunks/102-159e13f5ec23a8df.js" defer=""></script><script src="/_next/static/chunks/956-d3bd2e1bcfa611bc.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-000d2566608c9e90.js" defer=""></script><script src="/_next/static/tpHc5x1peL7GIqBfw_8u6/_buildManifest.js" defer=""></script><script src="/_next/static/tpHc5x1peL7GIqBfw_8u6/_ssgManifest.js" defer=""></script><script src="/_next/static/tpHc5x1peL7GIqBfw_8u6/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuGKYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuFuYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body class="antialiased text-black bg-white dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-6xl xl:px-0"><div class="flex flex-col justify-between h-screen"><header class="flex items-center justify-between py-10"><div><a aria-label="RefactorFirst" href="/"><div class="flex items-center justify-between"><div class="mr-3"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIi8+"/></span><img alt="RefactorFirst" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="RefactorFirst" srcSet="static/favicons/icon.png?imwidth=64 1x, static/favicons/icon.png?imwidth=128 2x" src="static/favicons/icon.png?imwidth=128" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div><div class="h-6 text-2xl font-semibold sm:block">RefactorFirst</div></div></a></div><div class="mt-6"></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 sm:p-4 dark:text-gray-100" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 sm:p-4 dark:text-gray-100" href="/posts">Posts</a><a class="p-1 font-medium text-gray-900 sm:p-4 dark:text-gray-100" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="w-8 h-8 p-1 ml-1 mr-1 rounded sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="w-8 h-8 py-1 ml-1 mr-1 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed w-full h-full top-24 right-0 bg-gray-200 dark:bg-gray-800 opacity-95 z-10 transform ease-in-out duration-300 translate-x-full"><button type="button" aria-label="toggle modal" class="fixed w-full h-full cursor-auto focus:outline-none"></button><nav class="fixed h-full mt-8"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/posts">Posts</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-6xl xl:px-0"><div class="fixed flex-col hidden gap-3 right-8 bottom-8 md:flex"><button aria-label="Scroll To Top" type="button" style="opacity:0" class="p-2 text-gray-500 transition-all bg-gray-200 rounded-full dark:text-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600 hover:bg-gray-300"><svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-100"><time dateTime="2021-10-14T00:00:00.000Z">Thursday, October 14, 2021</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Externalizing Application Configuration With Spring Cloud Config</h1><div class="mt-6"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzQ0IiBoZWlnaHQ9IjQwNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></span><img alt="Externalizing Application Configuration With Spring Cloud Config" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="object-cover object-center lg:h-48 md:h-36 rounded-2xl" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Externalizing Application Configuration With Spring Cloud Config" srcSet="static/images/2021/spring-cloud-config-server-git-backend/cover.jpg?imwidth=750 1x, static/images/2021/spring-cloud-config-server-git-backend/cover.jpg?imwidth=1920 2x" src="static/images/2021/spring-cloud-config-server-git-backend/cover.jpg?imwidth=1920" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="object-cover object-center lg:h-48 md:h-36 rounded-2xl" loading="lazy"/></noscript></span></div><div class="text-primary-500 hover:text-primary-600 text-md dark:hover:text-primary-400"><div></div></div><div class="mt-2 text-gray-500 dark:text-gray-100">9 min read</div></div></div></header><div class="pb-8 divide-y divide-gray-200 xl:divide-y-0 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:pt-11 xl:border-b xl:border-gray-200 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 xl:block sm:space-x-12 xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIi8+"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="w-10 h-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="static/images/avatar-small.jpg?imwidth=48 1x, static/images/avatar-small.jpg?imwidth=96 2x" src="static/images/avatar-small.jpg?imwidth=96" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="w-10 h-10 rounded-full" loading="lazy"/></noscript></span><dl class="text-sm font-medium leading-5 whitespace-nowrap"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Amrut Prabhu</dd><dt class="sr-only">Twitter</dt><dd><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/amrutprabhu42" class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400">@amrutprabhu42</a></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:pb-0 xl:col-span-3 xl:row-span-2"><div class="pt-10 pb-8 prose text-lg leading-8 dark:prose-dark max-w-none"><div></div><div><p>In this article, we would be looking at how we can externalize configs using Spring Cloud Config.</p>
<h1 id="introduction"><a href="#introduction" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Introduction</h1>
<p>One of the principles of the <a target="_blank" rel="noopener noreferrer" href="https://12factor.net/config">12 Factor App</a>, states that we have to separate our application configuration from the code. The configuration varies based on the environment and it&#x27;s better to organize them based on the environment your application is running.</p>
<p>So in this article, we will be looking at how we can externalize configurations with Spring Cloud Config.</p>
<h1 id="spring-cloud-config"><a href="#spring-cloud-config" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Spring Cloud Config</h1>
<p>Spring cloud config consists of two parts.</p>
<ul>
<li>A server to provide the configuration</li>
<li>A client to fetch the configuration.</li>
</ul>
<p>Let’s look at how we can set up the spring cloud config server to provide configuration to any application.</p>
<h2 id="spring-cloud-config-server"><a href="#spring-cloud-config-server" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Spring Cloud Config Server</h2>
<p>Let’s go to <a target="_blank" rel="noopener noreferrer" href="https://start.spring.io">https://start.spring.io</a> and create a project with the following dependencies.</p>
<ul>
<li>Spring Cloud Config Server</li>
</ul>
<p>Once you open the project, we need to configure the application to allow it to serve configuration. Now, the server can be configured with quite a few backends with which you can organize any client’s configuration. Here is a list of some of the supported backends.</p>
<ul>
<li>Git URL</li>
<li>AWS S3 bucket.</li>
<li>Redis</li>
<li>File System location.</li>
<li>HashiCorp Vault.</li>
<li>Cloudfoundary’s CredHub.</li>
</ul>
<p>These are some of the popular ones I have listed, but a few more backends can be integrated. You can find the list <a target="_blank" rel="noopener noreferrer" href="https://cloud.spring.io/spring-cloud-config/reference/html/#_environment_repository">here</a></p>
<p>Today we will explore how to configure Spring Cloud Config server with Git URL as the backend.</p>
<h2 id="configuring-spring-cloud-config-with-git"><a href="#configuring-spring-cloud-config-with-git" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Configuring Spring Cloud Config with Git</h2>
<p>To configure this, we will jump to the properties file.</p>
<p>Let’s start with the most basic config.</p>
<div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token key atrule">server</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8888</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token key atrule">config</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token key atrule">server</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token key atrule">git</span><span class="token punctuation">:</span>
</span><span class="code-line">          <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/amrutprabhu/spring<span class="token punctuation">-</span>boot<span class="token punctuation">-</span>external<span class="token punctuation">-</span>configuration<span class="token punctuation">-</span>options
</span></code></pre></div>
<p>This is the most minimalistic configuration required to use a git repo as a store for our client configurations.</p>
<p>Now, Let&#x27;s create some configuration files, in the git repo.</p>
<p>Here we have to organize the application property file names in the format <code>{client.application.name}-{profile}.yaml (or .properties)</code> .</p>
<p>For this example, we will only be setting the <code>server.port</code> property in the property files, so that the server starts on a different port depending on the profile.</p>
<p>Throughout this example, we would be considering a client whose application name is “config-client”.</p>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjkzIiBoZWlnaHQ9IjM0NyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></span><img alt="config files" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="config files" srcSet="static/images/2021/spring-cloud-config-server-git-backend/root.png?imwidth=750 1x, static/images/2021/spring-cloud-config-server-git-backend/root.png?imwidth=1920 2x" src="static/images/2021/spring-cloud-config-server-git-backend/root.png?imwidth=1920" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<p>With this Let’s start the application.</p>
<p>We can test the server to check the config it fetches for different profiles. To check this, we can hit the server with the following URL format.</p>
<div class="relative"><pre><code class="code-highlight"><span class="code-line">http://localhost:8888/{client.application.name}/{profile}
</span><span class="code-line">e.g
</span><span class="code-line">http://localhost:8888/config-client/dev
</span></code></pre></div>
<p>On hitting the above URL, we get the following.</p>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODQzIiBoZWlnaHQ9IjQ4OSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></span><img alt="dev profile call" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="dev profile call" srcSet="static/images/2021/spring-cloud-config-server-git-backend/root-test-call.png?imwidth=1080 1x, static/images/2021/spring-cloud-config-server-git-backend/root-test-call.png?imwidth=1920 2x" src="static/images/2021/spring-cloud-config-server-git-backend/root-test-call.png?imwidth=1920" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<p>As you can see, it is fetching the default config as well as the dev config here. This means that when the client starts up with the profile <code>dev</code> , it will use the properties from the dev YAML file, overriding the properties from the default file just as if the files had to be locally available to the client. Hence we get both the default as well as the dev-specific properties file.</p>
<h2 id="customizing-config-location-with-different-repositories"><a href="#customizing-config-location-with-different-repositories" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Customizing Config Location with Different Repositories</h2>
<p>Now, What if you want to organize the properties files in different repository locations?</p>
<p>For example, we want to have a different repo for each environment. To do this we will extend the properties further as follows.</p>
<div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token key atrule">server</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8888</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token key atrule">config</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token key atrule">server</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token key atrule">git</span><span class="token punctuation">:</span>
</span><span class="code-line">          <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/amrutprabhu/spring<span class="token punctuation">-</span>boot<span class="token punctuation">-</span>external<span class="token punctuation">-</span>configuration<span class="token punctuation">-</span>options
</span><span class="code-line">          <span class="token key atrule">repos</span><span class="token punctuation">:</span>
</span><span class="code-line">            <span class="token key atrule">staging-properties-repo</span><span class="token punctuation">:</span>
</span><span class="code-line">              <span class="token key atrule">pattern</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>client/staging
</span><span class="code-line">              <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/amrutprabhu/spring<span class="token punctuation">-</span>boot<span class="token punctuation">-</span>external<span class="token punctuation">-</span>configuration<span class="token punctuation">-</span>options
</span><span class="code-line">              <span class="token key atrule">search-paths</span><span class="token punctuation">:</span>
</span><span class="code-line">                <span class="token punctuation">-</span> spring<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>server<span class="token punctuation">-</span>setup/configs<span class="token punctuation">-</span>location
</span></code></pre></div>
<p>Now, here I have specified a repo name <code>staging-properties-repo</code> with a repo URI, a search path, and a pattern. For this example, I am using the same git repo, but you can use a completely different git repo that you want.</p>
<p>Now, here we can specify a pattern which is of the following format : <code>{client&#x27;s application name}/{client&#x27;s application profile}</code> . As it&#x27;s a pattern you can use wild card patterns. e.g</p>
<div class="relative"><pre><code class="code-highlight"><span class="code-line">config-client*/*
</span><span class="code-line">config-client/dev-*
</span><span class="code-line">config-*/dev*
</span></code></pre></div>
<p>Next, the <code>search-paths</code> property helps you to define locations, under which the config can be searched.</p>
<p>Since I have moved the properties under two subfolders I have mentioned the subfolder location in the <code>search-paths</code>.</p>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTAxIiBoZWlnaHQ9IjMzOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></span><img alt="config in sub folder" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="config in sub folder" srcSet="static/images/2021/spring-cloud-config-server-git-backend/moved-to-sub-folder.png?imwidth=1080 1x, static/images/2021/spring-cloud-config-server-git-backend/moved-to-sub-folder.png?imwidth=1920 2x" src="static/images/2021/spring-cloud-config-server-git-backend/moved-to-sub-folder.png?imwidth=1920" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<p>On restarting the application and hitting the URL, we get the following output for the staging profile.</p>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIyNSIgaGVpZ2h0PSI0ODYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIi8+"/></span><img alt="staging profile call" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="staging profile call" srcSet="static/images/2021/spring-cloud-config-server-git-backend/staging-test-call.png?imwidth=1920 1x, static/images/2021/spring-cloud-config-server-git-backend/staging-test-call.png?imwidth=3840 2x" src="static/images/2021/spring-cloud-config-server-git-backend/staging-test-call.png?imwidth=3840" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<h4 id="customizing-search-patterns"><a href="#customizing-search-patterns" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Customizing Search patterns</h4>
<p>We can customize the configuration using some reserved placeholders.</p>
<ul>
<li><code>{application}</code> - to refer to the client’s application name.</li>
<li><code>{profile}</code> - to refer to the client’s application profile.</li>
</ul>
<p>Let&#x27;s use these placeholders to add some more repositories.</p>
<div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token key atrule">prod-properies-repo</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/amrutprabhu/spring<span class="token punctuation">-</span>boot<span class="token punctuation">-</span>external<span class="token punctuation">-</span>configuration<span class="token punctuation">-</span>options
</span><span class="code-line">  <span class="token key atrule">pattern</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>client/prod
</span><span class="code-line">  <span class="token key atrule">search-paths</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> spring<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>server<span class="token punctuation">-</span>setup/configs<span class="token punctuation">-</span>location/<span class="token punctuation">{</span>profile<span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token key atrule">any-request-repo</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/amrutprabhu/spring<span class="token punctuation">-</span>boot<span class="token punctuation">-</span>external<span class="token punctuation">-</span>configuration<span class="token punctuation">-</span>options
</span><span class="code-line">  <span class="token key atrule">pattern</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>client<span class="token important">*/*</span>
</span><span class="code-line">  <span class="token key atrule">search-paths</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> spring<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>server<span class="token punctuation">-</span>setup/configs<span class="token punctuation">-</span>location/<span class="token punctuation">{</span>application<span class="token punctuation">}</span>/<span class="token punctuation">{</span>profile<span class="token punctuation">}</span>
</span></code></pre></div>
<p>Now here, the first repository has the profile name as the subdirectory to search for when the request comes in for the<code>prod</code> profile.</p>
<p>In the second one, if any other request comes in, then it would use the client application name and the profile subdirectory tree. Here is how the folders are organized.</p>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQ3IiBoZWlnaHQ9IjIxOSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></span><img alt="git folder structure" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="git folder structure" srcSet="static/images/2021/spring-cloud-config-server-git-backend/git-folder-structure.png?imwidth=384 1x, static/images/2021/spring-cloud-config-server-git-backend/git-folder-structure.png?imwidth=750 2x" src="static/images/2021/spring-cloud-config-server-git-backend/git-folder-structure.png?imwidth=750" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<p>Now with the new repositories added, let’s restart the application and test the output.</p>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI2MSIgaGVpZ2h0PSIzOTEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIi8+"/></span><img alt="prod profile call" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="prod profile call" srcSet="static/images/2021/spring-cloud-config-server-git-backend/prod-profile.png?imwidth=1920 1x, static/images/2021/spring-cloud-config-server-git-backend/prod-profile.png?imwidth=3840 2x" src="static/images/2021/spring-cloud-config-server-git-backend/prod-profile.png?imwidth=3840" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMzOSIgaGVpZ2h0PSIzODciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIi8+"/></span><img alt="dev profile call" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="dev profile call" srcSet="static/images/2021/spring-cloud-config-server-git-backend/dev-profile.png?imwidth=1920 1x, static/images/2021/spring-cloud-config-server-git-backend/dev-profile.png?imwidth=3840 2x" src="static/images/2021/spring-cloud-config-server-git-backend/dev-profile.png?imwidth=3840" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<p>These are just some ways you can organize your configuration.</p>
<p>Now you must be wondering…</p>
<blockquote>
<p>What happens if the configuration is changed on git when the config server is running?</p>
</blockquote>
<p>In this case, the config server will automatically pull the new configuration and give it to the requesting client on subsequent requests. No need to restart the config server.</p>
<blockquote>
<p>What happens if there is a matching pattern but no properties for that particular profile are found?</p>
</blockquote>
<p>In this case, it would try to find the properties from the default repo i.e. from the property <code>spring.cloud.config.server.git.uri</code> . If there are no properties available from the default repo, it will return empty Property Sources JSON.</p>
<p>With this, we are ready with our spring cloud config server.</p>
<p>Let’s create a client for this.</p>
<h2 id="creating-spring-cloud-config-client"><a href="#creating-spring-cloud-config-client" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Creating Spring Cloud Config Client.</h2>
<p>For this, We will create an application using <a target="_blank" rel="noopener noreferrer" href="https://start.spring.io">https://start.spring.io</a> with the following dependencies.</p>
<ul>
<li>Spring Cloud Starter Config</li>
<li>Spring Boot Web Starter (required only for Tomcat server)</li>
</ul>
<p>Now, let&#x27;s add some properties to the <code>application.yaml</code> file.</p>
<div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">application</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>client
</span><span class="code-line">  <span class="token key atrule">config</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token key atrule">import</span><span class="token punctuation">:</span> <span class="token string">&#x27;configserver:&#x27;</span>
</span></code></pre></div>
<p>Now since the <a target="_blank" rel="noopener noreferrer" href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes#breaking-changes">Spring Cloud 2020.0 version</a>, we need to specify from where we want the configs to be loaded. Since we are using a config server, We have to specify the property <code>spring.config.import=&quot;configserver:&quot;</code></p>
<p>The location from where the configs will be fetched is added to the<code>bootstrap.yaml</code> file.</p>
<div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token key atrule">config</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8888</span>
</span></code></pre></div>
<p>With this let’s build the application and run it using the following command with a profile argument</p>
<div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line">java -jar target/config-client-service-0.0.1-SNAPSHOT.jar <span class="token punctuation">\</span>
</span><span class="code-line">--spring.profiles.active<span class="token operator">=</span>prod
</span></code></pre></div>
<p>The client starts with port 9090, which is what was defined in the prod profile properties file.</p>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQxOSIgaGVpZ2h0PSIzNjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIi8+"/></span><img alt="prod profile console" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="prod profile console" srcSet="static/images/2021/spring-cloud-config-server-git-backend/clinet-prod-console.png?imwidth=1920 1x, static/images/2021/spring-cloud-config-server-git-backend/clinet-prod-console.png?imwidth=3840 2x" src="static/images/2021/spring-cloud-config-server-git-backend/clinet-prod-console.png?imwidth=3840" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<p>On starting the client service with the staging profile, It starts at port 6060</p>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQwOCIgaGVpZ2h0PSI0MjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIi8+"/></span><img alt="staging profile console" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="staging profile console" srcSet="static/images/2021/spring-cloud-config-server-git-backend/staging-profile-console.png?imwidth=1920 1x, static/images/2021/spring-cloud-config-server-git-backend/staging-profile-console.png?imwidth=3840 2x" src="static/images/2021/spring-cloud-config-server-git-backend/staging-profile-console.png?imwidth=3840" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<h2 id="useful-tip"><a href="#useful-tip" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Useful Tip.</h2>
<p>Now to test your configuration from the config server, It can become tedious to change the config, push the changes to git and then test the output.</p>
<p>You can make this easy by replacing the git URL with a local directory location where the configs repo is checked out. e.g</p>
<div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token key atrule">prod-properies-repo</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">uri</span><span class="token punctuation">:</span> file<span class="token punctuation">:</span>///home/user/spring<span class="token punctuation">-</span>boot<span class="token punctuation">-</span>external<span class="token punctuation">-</span>configuration<span class="token punctuation">-</span>options
</span><span class="code-line">  <span class="token key atrule">pattern</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>client/prod
</span><span class="code-line">  <span class="token key atrule">search-paths</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> spring<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>server<span class="token punctuation">-</span>setup/configs<span class="token punctuation">-</span>location/<span class="token punctuation">{</span>profile<span class="token punctuation">}</span>
</span></code></pre></div>
<p>You can then change the files locally and test your config server.</p>
<h1 id="conclusion"><a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Conclusion</h1>
<p>We just saw how to configure a Spring Cloud config server with a git repository backend and use it to start a client application. There have been some changes since Spring Cloud version 2020.0 and this example demonstrates the integration.</p>
<p>As usual, I have uploaded the code on <a target="_blank" rel="noopener noreferrer" href="https://github.com/amrutprabhu/spring-boot-external-configuration-options/tree/master/spring-cloud-config-server-setup">GitHub</a>.</p>
<p>I keep exploring and learning new things. If you want to know the latest trends and improve your software development skills, then subscribe to my newsletter below and also follow me on <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/amrutprabhu42">Twitter</a>.</p>
<p>Enjoy!!</p></div><div><div><button type="button" class="text-white bg-[#3b5998] hover:bg-[#3b5998]/90 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2 mb-2"><svg class="w-4 h-4 mr-2 -ml-1" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-f" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></svg>Share</button><button type="button" class="text-white bg-[#1da1f2] hover:bg-[#1da1f2]/90 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2 mb-2"><svg class="w-4 h-4 mr-2 -ml-1" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current"><path d="M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z"></path></svg></svg>Tweet</button><button type="button" class="text-white bg-[#0077B5] hover:bg-[#00A0DC]/90 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2 mb-2"><svg class="w-4 h-4 mr-2 -ml-1" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></svg>Post</button><button type="button" class="text-white bg-[#4285F4] hover:bg-[#4285F4]/90 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2 mb-2"><svg class="w-4 h-4 mr-2 -ml-1" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="email" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></svg>Share</button></div></div></div><hr/></div><footer><div class="text-sm font-medium leading-5 divide-gray-200 xl:divide-y dark:divide-gray-700 xl:col-start-1 xl:row-start-2"><div class="py-4 xl:py-8"><h2 class="text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="m-1 p-1 px-2 leading-4 h-6 rounded text-xs uppercase text-white bg-teal-500 hover:bg-teal-400 dark:hover:bg-teal-500 dark:bg-teal-600" href="/tags/spring-boot">Spring Boot</a><a class="m-1 p-1 px-2 leading-4 h-6 rounded text-xs uppercase text-white bg-teal-500 hover:bg-teal-400 dark:hover:bg-teal-500 dark:bg-teal-600" href="/tags/java">Java</a><a class="m-1 p-1 px-2 leading-4 h-6 rounded text-xs uppercase text-white bg-teal-500 hover:bg-teal-400 dark:hover:bg-teal-500 dark:bg-teal-600" href="/tags/configuration">Configuration</a><a class="m-1 p-1 px-2 leading-4 h-6 rounded text-xs uppercase text-white bg-teal-500 hover:bg-teal-400 dark:hover:bg-teal-500 dark:bg-teal-600" href="/tags/spring-cloud-config-server">Spring cloud config server</a><a class="m-1 p-1 px-2 leading-4 h-6 rounded text-xs uppercase text-white bg-teal-500 hover:bg-teal-400 dark:hover:bg-teal-500 dark:bg-teal-600" href="/tags/spring-cloud">Spring cloud</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/distributed-tracing-spring-boot-opentracing-jaeger">Distributed Tracing With Spring Cloud Jaeger</a></div></div><div><h2 class="text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/spring-boot-spring-cache-with-ehcache-3">Integrate Caching with Spring Cache and Ehcache 3</a></div></div></div></div><div class="pt-4 xl:pt-8 xl:mb-8 mb-4"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/">← Back to the articles</a></div><div class="hidden xl:block"><div class="border-2 border-teal-500 rounded-lg p-1"><div><a target="_blank" rel="noopener noreferrer" href="https://www.copecart.com/products/521411d4/p/techapk42"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA1NCIgaGVpZ2h0PSIyMTAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIvPg=="/></span><img alt="title" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="object-cover object-center " style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="title" srcSet="/static/images/promotion/testing-spring-boot-applications-masterclass-architecture-524x733.png?imwidth=1080 1x, /static/images/promotion/testing-spring-boot-applications-masterclass-architecture-524x733.png?imwidth=3840 2x" src="/static/images/promotion/testing-spring-boot-applications-masterclass-architecture-524x733.png?imwidth=3840" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="object-cover object-center " loading="lazy"/></noscript></span></a></div></div></div></footer></div></div></article></div></main><div class="ml-embedded" data-form="rRtdd0"></div><footer><div class="flex flex-col items-center mt-16"><div class="flex mb-3 space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:contact@refactorfirst.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/amrutprabhu"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/amrut-prabhu-722baa65/"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://twitter.com/amrutprabhu42"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z"></path></svg></a></div><div class="flex mb-2 space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Amrut Prabhu</div><div> • </div><div>© 2023</div><div> • </div><a href="/">RefactorFirst</a><div> • </div><a href="/privacy">Privacy Policy</a></div><br/></div></footer></div></div><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-6xl xl:px-0"><div id="cookie-notice" class="consent_consentname__aF_O7"><br/><br/><p>By clicking “I Accept”, you agree to the storing of cookies on your device to enhance site navigation and analyze site usage</p><br/><br/><div><a id="cookie-notice-accept" class="consent_greenButton__K0FRN">I Accept</a><a href="/privacy">Privacy Policy</a></div><br/><br/><br/></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var p=Object.create;var s=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var o=a=\u003es(a,\"__esModule\",{value:!0});var m=(a,i)=\u003e()=\u003e(i||a((i={exports:{}}).exports,i),i.exports),f=(a,i)=\u003e{o(a);for(var c in i)s(a,c,{get:i[c],enumerable:!0})},N=(a,i,c)=\u003e{if(i\u0026\u0026typeof i==\"object\"||typeof i==\"function\")for(let n of d(i))!g.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026s(a,n,{get:()=\u003ei[n],enumerable:!(c=h(i,n))||c.enumerable});return a},k=a=\u003eN(o(s(a!=null?p(u(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var r=m((S,l)=\u003e{l.exports=_jsx_runtime});var x={};f(x,{default:()=\u003ev,frontmatter:()=\u003ew});var e=k(r()),w={title:\"Externalizing Application Configuration With Spring Cloud Config\",author:\"Amrut Prabhu\",categories:\"\",tags:[\"Spring Boot\",\"Java\",\"Configuration\",\"Spring cloud config server\",\"Spring cloud\"],image:\"2021/spring-cloud-config-server-git-backend/cover.jpg\",\"photo-credits\":null,\"applaud-link\":\"2021/externalizing-config-with-spring-cloud-config.json\",date:\"2021-10-14\",draft:!1,summary:\"In this article, we would be looking at how we can externalize application configuration using Spring Cloud Config.\",imageUrl:\"/static/images/2021/spring-cloud-config-server-git-backend/cover.jpg\",actualUrl:\"auto-generated\",customUrl:\"auto-generated\"};function y(a={}){let{wrapper:i}=a.components||{};return i?(0,e.jsx)(i,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({p:\"p\",h1:\"h1\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",h2:\"h2\",pre:\"pre\",code:\"code\",div:\"div\",h4:\"h4\",blockquote:\"blockquote\"},a.components),{Image:t}=n;return t||b(\"Image\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"In this article, we would be looking at how we can externalize configs using Spring Cloud Config.\"}),`\n`,(0,e.jsxs)(n.h1,{id:\"introduction\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#introduction\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Introduction\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"One of the principles of the \",(0,e.jsx)(n.a,{href:\"https://12factor.net/config\",children:\"12 Factor App\"}),\", states that we have to separate our application configuration from the code. The configuration varies based on the environment and it's better to organize them based on the environment your application is running.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"So in this article, we will be looking at how we can externalize configurations with Spring Cloud Config.\"}),`\n`,(0,e.jsxs)(n.h1,{id:\"spring-cloud-config\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#spring-cloud-config\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Spring Cloud Config\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Spring cloud config consists of two parts.\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"A server to provide the configuration\"}),`\n`,(0,e.jsx)(n.li,{children:\"A client to fetch the configuration.\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"Let\\u2019s look at how we can set up the spring cloud config server to provide configuration to any application.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"spring-cloud-config-server\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#spring-cloud-config-server\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Spring Cloud Config Server\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Let\\u2019s go to \",(0,e.jsx)(n.a,{href:\"https://start.spring.io\",children:\"https://start.spring.io\"}),\" and create a project with the following dependencies.\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Spring Cloud Config Server\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"Once you open the project, we need to configure the application to allow it to serve configuration. Now, the server can be configured with quite a few backends with which you can organize any client\\u2019s configuration. Here is a list of some of the supported backends.\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Git URL\"}),`\n`,(0,e.jsx)(n.li,{children:\"AWS S3 bucket.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Redis\"}),`\n`,(0,e.jsx)(n.li,{children:\"File System location.\"}),`\n`,(0,e.jsx)(n.li,{children:\"HashiCorp Vault.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Cloudfoundary\\u2019s CredHub.\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"These are some of the popular ones I have listed, but a few more backends can be integrated. You can find the list \",(0,e.jsx)(n.a,{href:\"https://cloud.spring.io/spring-cloud-config/reference/html/#_environment_repository\",children:\"here\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"Today we will explore how to configure Spring Cloud Config server with Git URL as the backend.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"configuring-spring-cloud-config-with-git\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#configuring-spring-cloud-config-with-git\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Configuring Spring Cloud Config with Git\"]}),`\n`,(0,e.jsx)(n.p,{children:\"To configure this, we will jump to the properties file.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Let\\u2019s start with the most basic config.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"server\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"port\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8888\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"spring\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"cloud\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"config\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"server\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"git\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"uri\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" https\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//github.com/amrutprabhu/spring\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"boot\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"external\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"configuration\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`options\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"This is the most minimalistic configuration required to use a git repo as a store for our client configurations.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Now, Let's create some configuration files, in the git repo.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Here we have to organize the application property file names in the format \",(0,e.jsx)(n.code,{children:\"{client.application.name}-{profile}.yaml (or .properties)\"}),\" .\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"For this example, we will only be setting the \",(0,e.jsx)(n.code,{children:\"server.port\"}),\" property in the property files, so that the server starts on a different port depending on the profile.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Throughout this example, we would be considering a client whose application name is \\u201Cconfig-client\\u201D.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"config files\",src:\"/static/images/2021/spring-cloud-config-server-git-backend/root.png\",width:\"693\",height:\"347\"})}),`\n`,(0,e.jsx)(n.p,{children:\"With this Let\\u2019s start the application.\"}),`\n`,(0,e.jsx)(n.p,{children:\"We can test the server to check the config it fetches for different profiles. To check this, we can hit the server with the following URL format.\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`http://localhost:8888/{client.application.name}/{profile}\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`e.g\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`http://localhost:8888/config-client/dev\n`})]})}),`\n`,(0,e.jsx)(n.p,{children:\"On hitting the above URL, we get the following.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"dev profile call\",src:\"/static/images/2021/spring-cloud-config-server-git-backend/root-test-call.png\",width:\"843\",height:\"489\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"As you can see, it is fetching the default config as well as the dev config here. This means that when the client starts up with the profile \",(0,e.jsx)(n.code,{children:\"dev\"}),\" , it will use the properties from the dev YAML file, overriding the properties from the default file just as if the files had to be locally available to the client. Hence we get both the default as well as the dev-specific properties file.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"customizing-config-location-with-different-repositories\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#customizing-config-location-with-different-repositories\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Customizing Config Location with Different Repositories\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Now, What if you want to organize the properties files in different repository locations?\"}),`\n`,(0,e.jsx)(n.p,{children:\"For example, we want to have a different repo for each environment. To do this we will extend the properties further as follows.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"server\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"port\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8888\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"spring\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"cloud\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"config\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"server\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"git\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"uri\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" https\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//github.com/amrutprabhu/spring\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"boot\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"external\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"configuration\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`options\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"repos\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"staging-properties-repo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"pattern\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" config\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`client/staging\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"uri\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" https\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//github.com/amrutprabhu/spring\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"boot\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"external\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"configuration\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`options\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"search-paths\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" spring\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"cloud\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"config\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"server\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"setup/configs\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`location\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now, here I have specified a repo name \",(0,e.jsx)(n.code,{children:\"staging-properties-repo\"}),\" with a repo URI, a search path, and a pattern. For this example, I am using the same git repo, but you can use a completely different git repo that you want.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now, here we can specify a pattern which is of the following format : \",(0,e.jsx)(n.code,{children:\"{client's application name}/{client's application profile}\"}),\" . As it's a pattern you can use wild card patterns. e.g\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`config-client*/*\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`config-client/dev-*\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`config-*/dev*\n`})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Next, the \",(0,e.jsx)(n.code,{children:\"search-paths\"}),\" property helps you to define locations, under which the config can be searched.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Since I have moved the properties under two subfolders I have mentioned the subfolder location in the \",(0,e.jsx)(n.code,{children:\"search-paths\"}),\".\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"config in sub folder\",src:\"/static/images/2021/spring-cloud-config-server-git-backend/moved-to-sub-folder.png\",width:\"901\",height:\"338\"})}),`\n`,(0,e.jsx)(n.p,{children:\"On restarting the application and hitting the URL, we get the following output for the staging profile.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"staging profile call\",src:\"/static/images/2021/spring-cloud-config-server-git-backend/staging-test-call.png\",width:\"1225\",height:\"486\"})}),`\n`,(0,e.jsxs)(n.h4,{id:\"customizing-search-patterns\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#customizing-search-patterns\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Customizing Search patterns\"]}),`\n`,(0,e.jsx)(n.p,{children:\"We can customize the configuration using some reserved placeholders.\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"{application}\"}),\" - to refer to the client\\u2019s application name.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"{profile}\"}),\" - to refer to the client\\u2019s application profile.\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"Let's use these placeholders to add some more repositories.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"prod-properies-repo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"uri\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" https\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//github.com/amrutprabhu/spring\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"boot\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"external\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"configuration\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`options\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"pattern\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" config\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`client/prod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"search-paths\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" spring\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"cloud\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"config\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"server\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"setup/configs\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"location/\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"profile\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"any-request-repo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"uri\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" https\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//github.com/amrutprabhu/spring\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"boot\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"external\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"configuration\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`options\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"pattern\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" config\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"client\",(0,e.jsx)(n.span,{className:\"token important\",children:\"*/*\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"search-paths\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" spring\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"cloud\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"config\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"server\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"setup/configs\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"location/\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"application\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\"/\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"profile\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now here, the first repository has the profile name as the subdirectory to search for when the request comes in for the\",(0,e.jsx)(n.code,{children:\"prod\"}),\" profile.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"In the second one, if any other request comes in, then it would use the client application name and the profile subdirectory tree. Here is how the folders are organized.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"git folder structure\",src:\"/static/images/2021/spring-cloud-config-server-git-backend/git-folder-structure.png\",width:\"347\",height:\"219\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Now with the new repositories added, let\\u2019s restart the application and test the output.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"prod profile call\",src:\"/static/images/2021/spring-cloud-config-server-git-backend/prod-profile.png\",width:\"1261\",height:\"391\"})}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"dev profile call\",src:\"/static/images/2021/spring-cloud-config-server-git-backend/dev-profile.png\",width:\"1339\",height:\"387\"})}),`\n`,(0,e.jsx)(n.p,{children:\"These are just some ways you can organize your configuration.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Now you must be wondering\\u2026\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"What happens if the configuration is changed on git when the config server is running?\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"In this case, the config server will automatically pull the new configuration and give it to the requesting client on subsequent requests. No need to restart the config server.\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"What happens if there is a matching pattern but no properties for that particular profile are found?\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"In this case, it would try to find the properties from the default repo i.e. from the property \",(0,e.jsx)(n.code,{children:\"spring.cloud.config.server.git.uri\"}),\" . If there are no properties available from the default repo, it will return empty Property Sources JSON.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"With this, we are ready with our spring cloud config server.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Let\\u2019s create a client for this.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"creating-spring-cloud-config-client\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#creating-spring-cloud-config-client\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Creating Spring Cloud Config Client.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"For this, We will create an application using \",(0,e.jsx)(n.a,{href:\"https://start.spring.io\",children:\"https://start.spring.io\"}),\" with the following dependencies.\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Spring Cloud Starter Config\"}),`\n`,(0,e.jsx)(n.li,{children:\"Spring Boot Web Starter (required only for Tomcat server)\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now, let's add some properties to the \",(0,e.jsx)(n.code,{children:\"application.yaml\"}),\" file.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"spring\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"application\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" config\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`client\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"config\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"import\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'configserver:'\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now since the \",(0,e.jsx)(n.a,{href:\"https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes#breaking-changes\",children:\"Spring Cloud 2020.0 version\"}),\", we need to specify from where we want the configs to be loaded. Since we are using a config server, We have to specify the property \",(0,e.jsx)(n.code,{children:'spring.config.import=\"configserver:\"'})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"The location from where the configs will be fetched is added to the\",(0,e.jsx)(n.code,{children:\"bootstrap.yaml\"}),\" file.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"spring\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"cloud\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"config\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"uri\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" http\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//localhost\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"8888\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"With this let\\u2019s build the application and run it using the following command with a profile argument\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-shell\",children:(0,e.jsxs)(n.code,{className:\"language-shell code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"java -jar target/config-client-service-0.0.1-SNAPSHOT.jar \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--spring.profiles.active\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`prod\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"The client starts with port 9090, which is what was defined in the prod profile properties file.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"prod profile console\",src:\"/static/images/2021/spring-cloud-config-server-git-backend/clinet-prod-console.png\",width:\"1419\",height:\"362\"})}),`\n`,(0,e.jsx)(n.p,{children:\"On starting the client service with the staging profile, It starts at port 6060\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"staging profile console\",src:\"/static/images/2021/spring-cloud-config-server-git-backend/staging-profile-console.png\",width:\"1408\",height:\"424\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"useful-tip\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#useful-tip\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Useful Tip.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Now to test your configuration from the config server, It can become tedious to change the config, push the changes to git and then test the output.\"}),`\n`,(0,e.jsx)(n.p,{children:\"You can make this easy by replacing the git URL with a local directory location where the configs repo is checked out. e.g\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"prod-properies-repo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"uri\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" file\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"///home/user/spring\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"boot\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"external\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"configuration\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`options\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"pattern\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" config\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`client/prod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"search-paths\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" spring\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"cloud\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"config\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"server\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"setup/configs\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"location/\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"profile\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"You can then change the files locally and test your config server.\"}),`\n`,(0,e.jsxs)(n.h1,{id:\"conclusion\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#conclusion\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),`\n`,(0,e.jsx)(n.p,{children:\"We just saw how to configure a Spring Cloud config server with a git repository backend and use it to start a client application. There have been some changes since Spring Cloud version 2020.0 and this example demonstrates the integration.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"As usual, I have uploaded the code on \",(0,e.jsx)(n.a,{href:\"https://github.com/amrutprabhu/spring-boot-external-configuration-options/tree/master/spring-cloud-config-server-setup\",children:\"GitHub\"}),\".\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"I keep exploring and learning new things. If you want to know the latest trends and improve your software development skills, then subscribe to my newsletter below and also follow me on \",(0,e.jsx)(n.a,{href:\"https://twitter.com/amrutprabhu42\",children:\"Twitter\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Enjoy!!\"})]})}}var v=y;function b(a,i){throw new Error(\"Expected \"+(i?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return x;})();\n;return Component;","toc":[{"value":"Introduction","url":"#introduction","depth":1},{"value":"Spring Cloud Config","url":"#spring-cloud-config","depth":1},{"value":"Spring Cloud Config Server","url":"#spring-cloud-config-server","depth":2},{"value":"Configuring Spring Cloud Config with Git","url":"#configuring-spring-cloud-config-with-git","depth":2},{"value":"Customizing Config Location with Different Repositories","url":"#customizing-config-location-with-different-repositories","depth":2},{"value":"Customizing Search patterns","url":"#customizing-search-patterns","depth":4},{"value":"Creating Spring Cloud Config Client.","url":"#creating-spring-cloud-config-client","depth":2},{"value":"Useful Tip.","url":"#useful-tip","depth":2},{"value":"Conclusion","url":"#conclusion","depth":1}],"frontMatter":{"readingTime":{"text":"9 min read","minutes":8.055,"time":483300,"words":1611},"slug":"2021/externalize-config-with-spring-cloud-config","fileName":"2021/externalize-config-with-spring-cloud-config.md","title":"Externalizing Application Configuration With Spring Cloud Config","author":"Amrut Prabhu","categories":"","tags":["Spring Boot","Java","Configuration","Spring cloud config server","Spring cloud"],"image":"2021/spring-cloud-config-server-git-backend/cover.jpg","photo-credits":null,"applaud-link":"2021/externalizing-config-with-spring-cloud-config.json","date":"2021-10-14T00:00:00.000Z","draft":false,"summary":"In this article, we would be looking at how we can externalize application configuration using Spring Cloud Config.","imageUrl":"/static/images/2021/spring-cloud-config-server-git-backend/cover.jpg","actualUrl":"2021/externalize-config-with-spring-cloud-config","customUrl":"externalize-config-with-spring-cloud-config"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.875,"time":52500,"words":175},"slug":["default"],"fileName":"default.md","name":"Amrut Prabhu","avatar":"/static/images/avatar-small.jpg","avatarBig":"/static/images/avatar-big.jpg","occupation":"Staff Engineer","company":"Personal","email":"contact@refactorfirst.com","twitter":"https://twitter.com/amrutprabhu42","linkedin":"https://www.linkedin.com/in/amrut-prabhu-722baa65/","github":"https://github.com/amrutprabhu","customUrl":"default","actualUrl":"default","date":null}],"prev":{"title":"Distributed Tracing With Spring Cloud Jaeger","author":"Amrut Prabhu","categories":"","tags":["Spring Boot","Java","Jaeger","Distributed Tracing"],"image":"2021/distributed-tracing-with-jaeger/cover.jpg","photo-credits":null,"applaud-link":"2021/distributed-tracing-with-spring-cloud-jaeger.json","date":"2021-09-23T00:00:00.000Z","draft":false,"summary":"In this article, We will explore how to implement distributed tracing in a Spring Boot application using Jaeger and visualize the traces using Jaeger UI","imageUrl":"/static/images/2021/distributed-tracing-with-jaeger/cover.jpg","actualUrl":"2021/distributed-tracing-spring-boot-opentracing-jaeger","customUrl":"distributed-tracing-spring-boot-opentracing-jaeger","slug":"distributed-tracing-spring-boot-opentracing-jaeger"},"next":{"title":"Integrate Caching with Spring Cache and Ehcache 3","author":"Amrut Prabhu","categories":"","tags":["Spring Boot","Java","Spring cache","ehcache 3","Jcache"],"image":"2021/spring-cache-ehcache-3/cover.jpg","photo-credits":"","applaud-link":"2021/spring-cache-ehcache-3.json","date":"2021-11-02T00:00:00.000Z","draft":false,"summary":"In this article, we will look into some Spring Cache concepts and then integrate Ehcache 3.","imageUrl":"/static/images/2021/spring-cache-ehcache-3/cover.jpg","actualUrl":"2021/spring-boot-spring-cache-with-ehcache-3","customUrl":"spring-boot-spring-cache-with-ehcache-3","slug":"spring-boot-spring-cache-with-ehcache-3"}},"__N_SSG":true},"page":"/[slug]","query":{"slug":"externalize-config-with-spring-cloud-config"},"buildId":"tpHc5x1peL7GIqBfw_8u6","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>