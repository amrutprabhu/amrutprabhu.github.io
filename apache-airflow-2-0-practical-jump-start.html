<!DOCTYPE html><html lang="en"><head><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/icon.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/icon.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');d.add('light');if("system"===e||(!e&&false)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="amrutprabhu" data-description="Support me on Buy me a coffee!" data-message="" data-color="#FFDD00" data-position="Right" data-x_margin="18" data-y_margin="18" strategy="afterInteractive" async=""></script><title>Apache Airflow 2.0: A Practical Jump Start | RefactorFirst</title><meta name="robots" content="follow, index"/><meta name="description" content="In this article, I would like to give you a jump-start to understand the basic concepts and create a workflow pipeline from scratch."/><meta property="og:url" content="https://refactorfirst.com/apache-airflow-2-0-practical-jump-start"/><meta property="og:type" content="article"/><meta property="og:site_name" content="RefactorFirst"/><meta property="og:description" content="In this article, I would like to give you a jump-start to understand the basic concepts and create a workflow pipeline from scratch."/><meta property="og:title" content="Apache Airflow 2.0: A Practical Jump Start"/><meta property="og:image" content="https://refactorfirst.com/static/images/2021/airflow/airflow-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://twitter.com/amrutprabhu42"/><meta name="twitter:title" content="Apache Airflow 2.0: A Practical Jump Start"/><meta name="twitter:description" content="In this article, I would like to give you a jump-start to understand the basic concepts and create a workflow pipeline from scratch."/><meta name="twitter:image" content="https://refactorfirst.com/static/images/2021/airflow/airflow-cover.jpg"/><meta property="article:published_time" content="2021-04-28T00:00:00.000Z"/><link rel="canonical" href="https://refactorfirst.com/apache-airflow-2-0-practical-jump-start"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://refactorfirst.com/2020/apache-airflow-2-0-practical-jump-start"
  },
  "headline": "Apache Airflow 2.0: A Practical Jump Start",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://refactorfirst.com/static/images/2021/airflow/airflow-cover.jpg"
    }
  ],
  "datePublished": "2021-04-28T00:00:00.000Z",
  "dateModified": "2021-04-28T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Amrut Prabhu"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Amrut Prabhu",
    "logo": {
      "@type": "ImageObject",
      "url": "https://refactorfirst.com/static/images/favicons/icon.png"
    }
  },
  "description": "In this article, I would like to give you a jump-start to understand the basic concepts and create a workflow pipeline from scratch."
}</script><meta name="next-head-count" content="21"/><link rel="preload" href="/_next/static/css/f6b79fbda81beca0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f6b79fbda81beca0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-b1bd289e74604975.js" defer=""></script><script src="/_next/static/chunks/main-a8532ea7c2505ecc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-115c3eb9acb4de97.js" defer=""></script><script src="/_next/static/chunks/framework-327e104994690a53.js" defer=""></script><script src="/_next/static/chunks/207-4f91422181f853c0.js" defer=""></script><script src="/_next/static/chunks/102-c63715bda7cf0f65.js" defer=""></script><script src="/_next/static/chunks/883-969d35733b3fb9ae.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-da416b81bf0ecd48.js" defer=""></script><script src="/_next/static/LNr9i4u3rmH-bZFWF6mqj/_buildManifest.js" defer=""></script><script src="/_next/static/LNr9i4u3rmH-bZFWF6mqj/_ssgManifest.js" defer=""></script><script src="/_next/static/LNr9i4u3rmH-bZFWF6mqj/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuGKYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuFuYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body class="antialiased text-black bg-white dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-6xl xl:px-0"><div class="flex flex-col justify-between h-screen"><header class="flex items-center justify-between py-10"><div><a aria-label="RefactorFirst" href="/"><div class="flex items-center justify-between"><div class="mr-3"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIi8+"/></span><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img srcSet="/static/favicons/icon.png?imwidth=64 1x, /static/favicons/icon.png?imwidth=128 2x" src="/static/favicons/icon.png?imwidth=128" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div><div class="h-6 text-2xl font-semibold sm:block">RefactorFirst</div></div></a></div><div class="mt-6"></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 sm:p-4 dark:text-gray-100" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 sm:p-4 dark:text-gray-100" href="/posts">Posts</a><a class="p-1 font-medium text-gray-900 sm:p-4 dark:text-gray-100" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="w-8 h-8 p-1 ml-1 mr-1 rounded sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="w-8 h-8 py-1 ml-1 mr-1 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed w-full h-full top-24 right-0 bg-gray-200 dark:bg-gray-800 opacity-95 z-10 transform ease-in-out duration-300 translate-x-full"><button type="button" aria-label="toggle modal" class="fixed w-full h-full cursor-auto focus:outline-none"></button><nav class="fixed h-full mt-8"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/posts">Posts</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-6xl xl:px-0"><div class="fixed flex-col hidden gap-3 right-8 bottom-8 md:flex"><button aria-label="Scroll To Top" type="button" style="opacity:0" class="p-2 text-gray-500 transition-all bg-gray-200 rounded-full dark:text-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600 hover:bg-gray-300"><svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2021-04-28T00:00:00.000Z">Wednesday, April 28, 2021</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Apache Airflow 2.0: A Practical Jump Start</h1><div class="mt-6"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzQ0IiBoZWlnaHQ9IjQwNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></span><img alt="Apache Airflow 2.0: A Practical Jump Start" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="object-cover object-center lg:h-48 md:h-36" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Apache Airflow 2.0: A Practical Jump Start" srcSet="static/images/2021/airflow/airflow-cover.jpg?imwidth=750 1x, static/images/2021/airflow/airflow-cover.jpg?imwidth=1920 2x" src="static/images/2021/airflow/airflow-cover.jpg?imwidth=1920" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="object-cover object-center lg:h-48 md:h-36" loading="lazy"/></noscript></span></div><div class="text-primary-500 hover:text-primary-600 text-md dark:hover:text-primary-400"><a target="_blank" rel="noopener noreferrer" href="https://unsplash.com/photos/BpEOwR57QEg"> Photo Credits</a></div><div class="mt-2 text-gray-500 dark:text-gray-400">9 min read</div></div></div></header><div class="pb-8 divide-y divide-gray-200 xl:divide-y-0 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:pt-11 xl:border-b xl:border-gray-200 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 xl:block sm:space-x-12 xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIi8+"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="w-10 h-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="static/images/avatar-small.jpg?imwidth=48 1x, static/images/avatar-small.jpg?imwidth=96 2x" src="static/images/avatar-small.jpg?imwidth=96" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="w-10 h-10 rounded-full" loading="lazy"/></noscript></span><dl class="text-sm font-medium leading-5 whitespace-nowrap"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Amrut Prabhu</dd><dt class="sr-only">Twitter</dt><dd><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/amrutprabhu42" class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400">@amrutprabhu42</a></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:pb-0 xl:col-span-3 xl:row-span-2"><div class="pt-10 pb-8 prose text-md dark:prose-dark max-w-none"><div></div><div><p>In this article, I would like to give you a jump-start tutorial to understand the basic concepts and create a workflow pipeline from scratch.</p>
<p>So let&#x27;s get started!</p>
<h1 id="introduction"><a href="#introduction" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Introduction</h1>
<p>Apache Airflow is an orchestration tool that helps you to programmatically create and handle task execution into a single workflow. It then handles monitoring its progress and takes care of scheduling future workflows depending on the schedule defined.</p>
<p>Workflows are created using python scripts, which define how your tasks are executed. They are usually defined as Directed Acyclic Graphs(DAG).</p>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQ3IiBoZWlnaHQ9IjIzNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></span><img alt="AirFlow DAG" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="AirFlow DAG" srcSet="static/images/2021/airflow/dag.png?imwidth=750 1x, static/images/2021/airflow/dag.png?imwidth=1920 2x" src="static/images/2021/airflow/dag.png?imwidth=1920" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<p>The workflow execution is based on the schedule you provide, which is as per Unix cron schedule format. Once you create python scripts and place them in the dags folder of Airflow, Airflow will automatically create the workflow for you.</p>
<p>How difficult are the python scripts?</p>
<p>Well, not difficult but pretty straightforward. Let me explain this.</p>
<h1 id="key-concepts"><a href="#key-concepts" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Key Concepts</h1>
<p>A workflow is made up of tasks and each task is an operator. Now, what is an operator? An operator a python class that does some work for you. These classes are provided by airflow itself. Some basic operators are</p>
<ul>
<li>BashOperator - used to run bash commands.</li>
<li>PythonOperator - used to run a python function you define.</li>
<li>BranchOperator - used to create a branch in the workflow.</li>
<li>DummyOperator - used to represent a dummy task.</li>
</ul>
<p>There are quite a few other operators that will help you make an HTTP call, connect to a Postgres instance, connect to slack, etc. You can find more operators <a target="_blank" rel="noopener noreferrer" href="https://airflow.apache.org/docs/apache-airflow/stable/python-api-ref.html#operators">here</a>.</p>
<p>Finally, with the theory done, Let’s do something exciting i.e. create our first Airflow DAG.</p>
<h1 id="creating-an-airflow-dag"><a href="#creating-an-airflow-dag" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Creating an Airflow DAG.</h1>
<p>As an example, Let&#x27;s create a workflow that does the following</p>
<ol>
<li>Check if the URL is available</li>
<li>Fetches some data from an URL</li>
<li>Extract certain fields from it.</li>
<li>Print the extracted fields using the bash echo command.</li>
</ol>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTgzIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></span><img alt="Example Airflow DAG" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Example Airflow DAG" srcSet="static/images/2021/airflow/example_workflow.png?imwidth=640 1x, static/images/2021/airflow/example_workflow.png?imwidth=1200 2x" src="static/images/2021/airflow/example_workflow.png?imwidth=1200" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<p>Pretty simple workflow, But there are some useful concepts that I will explain as we go.</p>
<p>So let&#x27;s start.</p>
<h1 id="running-apache-airflow-with-docker"><a href="#running-apache-airflow-with-docker" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Running Apache Airflow with Docker</h1>
<p>The official Airflow site provides a <a target="_blank" rel="noopener noreferrer" href="https://airflow.apache.org/docs/apache-airflow/stable/start/docker.html#docker-compose-yaml">docker-compose file</a> with all the components needed to run Airflow. Once you download the docker-compose file, You can start it using the docker-compose command.</p>
<div class="relative"><pre><code class="code-highlight"><span class="code-line">docker-compose up -d
</span></code></pre></div>
<p>Once your containers are up and running, a<code>dags</code> folder is created on your local machine where you placed the docker-compose.yml file. We are going to use this <code>dags</code> folder to place our python workflows. You can access the Airflow web UI using the URL <code>localhost:8080</code></p>
<h1 id="creating-your-dag-definition"><a href="#creating-your-dag-definition" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Creating your DAG Definition</h1>
<p>First, we will create a skeleton of the workflow, i.e, in this case, is the DAG definition.</p>
<div class="relative"><pre><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">from</span> airflow<span class="token punctuation">.</span>models <span class="token keyword">import</span> DAG
</span><span class="code-line">
</span><span class="code-line">default_args <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token string">&#x27;start_date&#x27;</span><span class="token punctuation">:</span> datetime<span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token keyword">with</span> DAG<span class="token punctuation">(</span><span class="token string">&#x27;user_processing&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">         schedule_interval<span class="token operator">=</span><span class="token string">&#x27;@daily&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">         default_args<span class="token operator">=</span>default_args<span class="token punctuation">,</span>
</span><span class="code-line">         catchup<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token keyword">as</span> dag<span class="token punctuation">:</span>
</span></code></pre></div>
<p>With this, you just created a new workflow, But without any tasks to be executed. The first parameter is the name of the DAG, followed by the schedule you want it to be triggered. Then you set some default arguments like <code>start_date</code>telling when actually the DAG can start to trigger.</p>
<p>Next, let&#x27;s create our first task.</p>
<p>Now, to check if our URL is reachable, we are going to use a sensor operator. In this case, it&#x27;s an <code>HttpSensor</code> operator.</p>
<div class="relative"><pre><code class="language-python code-highlight"><span class="code-line"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line"><span class="token keyword">with</span> DAG<span class="token punctuation">(</span><span class="token string">&#x27;user_content_processing&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">         schedule_interval<span class="token operator">=</span><span class="token string">&#x27;@daily&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">         default_args<span class="token operator">=</span>default_args<span class="token punctuation">)</span> <span class="token keyword">as</span> dag<span class="token punctuation">:</span>
</span><span class="code-line">
</span><span class="code-line">    is_api_available <span class="token operator">=</span> HttpSensor<span class="token punctuation">(</span>
</span><span class="code-line">        task_id<span class="token operator">=</span><span class="token string">&#x27;is_api_available&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">        http_conn_id<span class="token operator">=</span><span class="token string">&#x27;user_api&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">        endpoint<span class="token operator">=</span><span class="token string">&#x27;api/&#x27;</span>
</span><span class="code-line">    <span class="token punctuation">)</span>
</span></code></pre></div>
<p>To create the HttpSensor operator, We provide it with a task id, HTTP connection id, and endpoint. The task id identifies the task in the DAG, and the endpoint identifies the API to fetch. Now the third parameter i.e <code>http_conn_id</code> will require something to be explained.</p>
<p>Airflow provides a mechanism to create and store some configurations that you can use across workflows. One such type is configuring “Connections”. Here you can provide various connections like AWS connections, ElasticSearch connection, Kubernetes cluster connections, etc.</p>
<p>In our case, we would be using the HTTP connection option. Here we would provide the URL we want to trigger and setting the connection id to <code>user_api</code> .We want to call the URL <a target="_blank" rel="noopener noreferrer" href="https://randomuser.me/api/">https://randomuser.me/api/</a>, which will return a JSON response of some random user information.</p>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjYxIiBoZWlnaHQ9IjQxMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></span><img alt="Airflow Connection Creation" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Airflow Connection Creation" srcSet="static/images/2021/airflow/airflow-http-connection.png?imwidth=750 1x, static/images/2021/airflow/airflow-http-connection.png?imwidth=1920 2x" src="static/images/2021/airflow/airflow-http-connection.png?imwidth=1920" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<p>Finally, with this configured, the task is ready to make a call to the URL with the endpoint provided.</p>
<p>So with that, We just created our first task and learned some concepts.</p>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDE5IiBoZWlnaHQ9IjM0MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></span><img alt="Airflow DAG task" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Airflow DAG task" srcSet="static/images/2021/airflow/airflow-first-dag-task.png?imwidth=640 1x, static/images/2021/airflow/airflow-first-dag-task.png?imwidth=1080 2x" src="static/images/2021/airflow/airflow-first-dag-task.png?imwidth=1080" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<p>Now, once the first task execution succeeds, we want to execute the task that will make the actual call to get user details. For this, we are going to make use of an HttpOperator called <code>SimpleHttpOperator</code>.</p>
<div class="relative"><pre><code class="language-python code-highlight"><span class="code-line">is_api_available <span class="token operator">=</span> HttpSensor<span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line"><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">extracting_user <span class="token operator">=</span> SimpleHttpOperator<span class="token punctuation">(</span>
</span><span class="code-line">    task_id<span class="token operator">=</span><span class="token string">&#x27;extracting_user&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    http_conn_id<span class="token operator">=</span><span class="token string">&#x27;user_api&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    endpoint<span class="token operator">=</span><span class="token string">&#x27;api/&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    method<span class="token operator">=</span><span class="token string">&#x27;GET&#x27;</span>
</span><span class="code-line"><span class="token punctuation">)</span>
</span></code></pre></div>
<p>As you can see, we have the <code>task_id</code>to identify this task, the <code>http_conn_id</code> we spoke about before, the endpoint, and the method you want to execute.</p>
<p>That&#x27;s it!</p>
<p>Now you must be wondering what happens to the response. For this let&#x27;s look into another concept called Xcoms</p>
<h1 id="xcoms"><a href="#xcoms" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Xcoms</h1>
<p>Xcoms is a way you can share data between your tasks. It basically stores key-value pairs of the information you want to store that can be accessed by other tasks in a DAG.</p>
<p>The SimpleHttpOperator stores the response inside these Xcoms. Hence we will use another task to retrieve the value and process it. You can read more about Xcoms <a target="_blank" rel="noopener noreferrer" href="https://airflow.apache.org/docs/apache-airflow/stable/concepts.html?highlight=xcom#xcoms">here</a></p>
<p>Once the data is fetched, We are going to create a processor, which will process the data that was pushed into Xcoms by the previous task. We will do this using a python function and hence the new operator that we are going to use is the <code>PythonOperator</code>.</p>
<div class="relative"><pre><code class="language-python code-highlight"><span class="code-line">fetch_user <span class="token operator">=</span> SimpleHttpOperator<span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line"><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">processing_user <span class="token operator">=</span> PythonOperator<span class="token punctuation">(</span>
</span><span class="code-line">    task_id<span class="token operator">=</span><span class="token string">&#x27;processing_user&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    python_callable<span class="token operator">=</span>_processing_user
</span><span class="code-line"><span class="token punctuation">)</span>
</span></code></pre></div>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjg3IiBoZWlnaHQ9IjM2NSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></span><img alt="DAG Tasks" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="DAG Tasks" srcSet="static/images/2021/airflow/airflow-dag-tasks.png?imwidth=750 1x, static/images/2021/airflow/airflow-dag-tasks.png?imwidth=1920 2x" src="static/images/2021/airflow/airflow-dag-tasks.png?imwidth=1920" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<p>The <code>PythonOperator</code> is a simple operator, that takes the <code>task_id</code> and a python callable function. Let’s look at the function.</p>
<div class="relative"><pre><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">def</span> <span class="token function">_processing_user</span><span class="token punctuation">(</span>ti<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    users_txt <span class="token operator">=</span> ti<span class="token punctuation">.</span>xcom_pull<span class="token punctuation">(</span>task_ids<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;extracting_user&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
</span><span class="code-line">    users <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>users_txt<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">len</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token string">&#x27;results&#x27;</span> <span class="token keyword">not</span> <span class="token keyword">in</span> users<span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">&quot;User is empty&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">    user <span class="token operator">=</span> users<span class="token punctuation">[</span><span class="token string">&#x27;results&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
</span><span class="code-line">    user_map <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token string">&#x27;firstname&#x27;</span><span class="token punctuation">:</span> user<span class="token punctuation">[</span><span class="token string">&#x27;name&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#x27;first&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token string">&#x27;lastname&#x27;</span><span class="token punctuation">:</span> user<span class="token punctuation">[</span><span class="token string">&#x27;name&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#x27;last&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    processed_user <span class="token operator">=</span> json_normalize<span class="token punctuation">(</span>user_map<span class="token punctuation">)</span>
</span><span class="code-line">    Variable<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> processed_user<span class="token punctuation">)</span>
</span></code></pre></div>
<p>So this function receives a Task Instance (referred as <code>ti</code>). We use this task instance to get the information that our task <code>extracting_user</code> has pushed to Xcoms, using <code>xcom_pull</code> call. We then validate the input and extract some fields as a dictionary. Finally, we normalize the dictionary and add it to something called <code>Variables</code>. Let’s look at what are Variables.</p>
<h1 id="variables"><a href="#variables" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Variables</h1>
<p>Variables are a way to store and extract some values that you would like to use across any DAG. It&#x27;s basically a key-value store of arbitrary data. You can read more in detail about it <a target="_blank" rel="noopener noreferrer" href="https://airflow.apache.org/docs/apache-airflow/stable/concepts.html?highlight=xcom#variables">here</a>.</p>
<p>Now that we have stored the values inside Variables, Let print them to the logs using the <code>echo</code> command. To do this we are going to use the <code>BashOperator</code></p>
<div class="relative"><pre><code class="language-python code-highlight"><span class="code-line"><span class="token punctuation">{</span><span class="token operator">%</span> raw <span class="token operator">%</span><span class="token punctuation">}</span>
</span><span class="code-line">processing_user <span class="token operator">=</span> PythonOperator<span class="token punctuation">(</span>
</span><span class="code-line">   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line"><span class="token punctuation">)</span>
</span><span class="code-line">print_user <span class="token operator">=</span> BashOperator<span class="token punctuation">(</span>
</span><span class="code-line">    task_id<span class="token operator">=</span><span class="token string">&#x27;log_user&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    bash_command<span class="token operator">=</span><span class="token string">&#x27;echo &quot;{{ var.value.user }}&quot;&#x27;</span>
</span><span class="code-line"><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">{</span><span class="token operator">%</span> endraw <span class="token operator">%</span><span class="token punctuation">}</span>
</span></code></pre></div>
<p>In this, I will explain to you another important concept called Templating.</p>
<h1 id="templating"><a href="#templating" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Templating</h1>
<p>Airflow uses <a target="_blank" rel="noopener noreferrer" href="https://jinja.palletsprojects.com/">Jinja Templating</a>. As you have seen in the code above, I have used curly braces which allow me to materialize some values. In this case, I have extracted the <code>user</code> key from Variables (using <code>var</code> ) which I had stored using the previous task.</p>
<p>Now how would you know if the particular operator supports templating? For this, you can search for “template_fields” in the API reference of the operator, Which will tell you which fields support templating. e.g You can have a look at the HttpSensor operator reference <a target="_blank" rel="noopener noreferrer" href="https://airflow.apache.org/docs/apache-airflow-providers-http/stable/_api/airflow/providers/http/sensors/http/index.html">here</a>.</p>
<h1 id="ordering-your-tasks"><a href="#ordering-your-tasks" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Ordering Your Tasks</h1>
<p>Now, With all of this, we have created all the tasks instances. But we still have to order the tasks. To do this, we make use of the <code>&lt;&lt;</code> operator. You define it as</p>
<div class="relative"><pre><code class="language-python code-highlight"><span class="code-line">Task <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> Task <span class="token number">2</span>
</span></code></pre></div>
<p>This means Task 1 will run before Task 2. In our case, we will order this as</p>
<div class="relative"><pre><code class="language-python code-highlight"><span class="code-line">is_api_available <span class="token operator">&gt;&gt;</span> fetch_user <span class="token operator">&gt;&gt;</span> processing_user <span class="token operator">&gt;&gt;</span> print_user
</span></code></pre></div>
<p>And there we go. We just created a simple Airflow DAG workflow from scratch covering some of the important concepts of Airflow. Now, enable the DAG and hit run. It will start executing.</p>
<div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTM0MCIgaGVpZ2h0PSI1NDQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIi8+"/></span><img alt="Apache Airflow Successful Execution" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Apache Airflow Successful Execution" srcSet="static/images/2021/airflow/airflow-dag-successful-run.png?imwidth=1920 1x, static/images/2021/airflow/airflow-dag-successful-run.png?imwidth=3840 2x" src="static/images/2021/airflow/airflow-dag-successful-run.png?imwidth=3840" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<p>As usual, I have uploaded the code on <a target="_blank" rel="noopener noreferrer" href="https://github.com/amrutprabhu/airflow-workouts/blob/master/dags/user_data_processing.py">GitHub</a>. :)</p>
<p>Enjoy!!</p></div></div><hr/></div><footer><div class="text-sm font-medium leading-5 divide-gray-200 xl:divide-y dark:divide-gray-700 xl:col-start-1 xl:row-start-2"><div class="py-4 xl:py-8"><h2 class="text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="m-1 p-1 leading-4 h-6 rounded text-xs uppercase text-white bg-teal-500 hover:bg-teal-600 dark:hover:bg-teal-500 dark:bg-teal-600" href="/tags/python">python</a><a class="m-1 p-1 leading-4 h-6 rounded text-xs uppercase text-white bg-teal-500 hover:bg-teal-600 dark:hover:bg-teal-500 dark:bg-teal-600" href="/tags/airflow">airflow</a><a class="m-1 p-1 leading-4 h-6 rounded text-xs uppercase text-white bg-teal-500 hover:bg-teal-600 dark:hover:bg-teal-500 dark:bg-teal-600" href="/tags/java">Java</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/spring-boot-api-first-design">Spring Boot: API First Design</a></div></div><div><h2 class="text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/kind-kubernetes-cluster">Kind - A New Kubernetes Cluster</a></div></div></div></div><div class="pt-4 xl:pt-8 xl:mb-8 mb-4"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/">← Back to the articles</a></div><div class="border-4 border-teal-500 rounded-lg p-1"><a target="_blank" rel="noopener noreferrer" href="https://transactions.sendowl.com/stores/13745/235788"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA1NCIgaGVpZ2h0PSIyMTAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIvPg=="/></span><img alt="title" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="object-cover object-center " style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="title" srcSet="/static/images/promotion/testing-spring-boot-applications-masterclass-architecture-524x733.png?imwidth=1080 1x, /static/images/promotion/testing-spring-boot-applications-masterclass-architecture-524x733.png?imwidth=3840 2x" src="/static/images/promotion/testing-spring-boot-applications-masterclass-architecture-524x733.png?imwidth=3840" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="object-cover object-center " loading="lazy"/></noscript></span></a></div></footer></div></div></article></div></main><div class="ml-form-embed" data-account="3117349:p5v1c3m1v8" data-form="4015126:i6h8m5"></div><footer><div class="flex flex-col items-center mt-16"><div class="flex mb-3 space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:contact@refactorfirst.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/amrutprabhu"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/amrut-prabhu-722baa65/"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://twitter.com/amrutprabhu42"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z"></path></svg></a></div><div class="flex mb-2 space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Amrut Prabhu</div><div> • </div><div>© 2022</div><div> • </div><a href="/">RefactorFirst</a><div> • </div><a href="/privacy">Privacy Policy</a></div><br/></div></footer></div></div><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-6xl xl:px-0"><div id="cookie-notice" class="consent_consentname__aF_O7"><br/><br/><p>By clicking “I Accept”, you agree to the storing of cookies on your device to enhance site navigation and analyze site usage</p><br/><br/><div><a id="cookie-notice-accept" class="consent_greenButton__K0FRN">I Accept</a><a href="/privacy">Privacy Policy</a></div><br/><br/><br/></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var d=Object.create;var i=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var o=a=\u003ei(a,\"__esModule\",{value:!0});var k=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=\u003e{o(a);for(var t in s)i(a,t,{get:s[t],enumerable:!0})},g=(a,s,t)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of p(s))!m.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026i(a,n,{get:()=\u003es[n],enumerable:!(t=h(s,n))||t.enumerable});return a},w=a=\u003eg(o(i(a!=null?d(u(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var r=k((A,l)=\u003e{l.exports=_jsx_runtime});var v={};N(v,{default:()=\u003eb,frontmatter:()=\u003ef});var e=w(r()),f={title:\"Apache Airflow 2.0: A Practical Jump Start\",author:\"Amrut Prabhu\",categories:\"\",tags:[\"python\",\"airflow\",\"Java\"],image:\"airflow/airflow-cover.jpg\",\"photo-credits\":\"https://unsplash.com/photos/BpEOwR57QEg\",\"applaud-link\":\"apache-airflow-2-0-practical-jump-start.json\",date:\"2021-04-28\",draft:!1,summary:\"In this article, I would like to give you a jump-start to understand the basic concepts and create a workflow pipeline from scratch.\",imageUrl:\"/static/images/2021/airflow/airflow-cover.jpg\",actualUrl:\"auto-generated\",customUrl:\"auto-generated\"};function y(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(t,{})})):t();function t(){let n=Object.assign({p:\"p\",h1:\"h1\",a:\"a\",span:\"span\",div:\"div\",ul:\"ul\",li:\"li\",ol:\"ol\",pre:\"pre\",code:\"code\"},a.components),{Image:c}=n;return c||_(\"Image\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"In this article, I would like to give you a jump-start tutorial to understand the basic concepts and create a workflow pipeline from scratch.\"}),`\n`,(0,e.jsx)(n.p,{children:\"So let's get started!\"}),`\n`,(0,e.jsxs)(n.h1,{id:\"introduction\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#introduction\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Introduction\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Apache Airflow is an orchestration tool that helps you to programmatically create and handle task execution into a single workflow. It then handles monitoring its progress and takes care of scheduling future workflows depending on the schedule defined.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Workflows are created using python scripts, which define how your tasks are executed. They are usually defined as Directed Acyclic Graphs(DAG).\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(c,{alt:\"AirFlow DAG\",src:\"/static/images/2021/airflow/dag.png\",width:\"647\",height:\"236\"})}),`\n`,(0,e.jsx)(n.p,{children:\"The workflow execution is based on the schedule you provide, which is as per Unix cron schedule format. Once you create python scripts and place them in the dags folder of Airflow, Airflow will automatically create the workflow for you.\"}),`\n`,(0,e.jsx)(n.p,{children:\"How difficult are the python scripts?\"}),`\n`,(0,e.jsx)(n.p,{children:\"Well, not difficult but pretty straightforward. Let me explain this.\"}),`\n`,(0,e.jsxs)(n.h1,{id:\"key-concepts\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#key-concepts\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Key Concepts\"]}),`\n`,(0,e.jsx)(n.p,{children:\"A workflow is made up of tasks and each task is an operator. Now, what is an operator? An operator a python class that does some work for you. These classes are provided by airflow itself. Some basic operators are\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"BashOperator - used to run bash commands.\"}),`\n`,(0,e.jsx)(n.li,{children:\"PythonOperator - used to run a python function you define.\"}),`\n`,(0,e.jsx)(n.li,{children:\"BranchOperator - used to create a branch in the workflow.\"}),`\n`,(0,e.jsx)(n.li,{children:\"DummyOperator - used to represent a dummy task.\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"There are quite a few other operators that will help you make an HTTP call, connect to a Postgres instance, connect to slack, etc. You can find more operators \",(0,e.jsx)(n.a,{href:\"https://airflow.apache.org/docs/apache-airflow/stable/python-api-ref.html#operators\",children:\"here\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Finally, with the theory done, Let\\u2019s do something exciting i.e. create our first Airflow DAG.\"}),`\n`,(0,e.jsxs)(n.h1,{id:\"creating-an-airflow-dag\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#creating-an-airflow-dag\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Creating an Airflow DAG.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"As an example, Let's create a workflow that does the following\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Check if the URL is available\"}),`\n`,(0,e.jsx)(n.li,{children:\"Fetches some data from an URL\"}),`\n`,(0,e.jsx)(n.li,{children:\"Extract certain fields from it.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Print the extracted fields using the bash echo command.\"}),`\n`]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(c,{alt:\"Example Airflow DAG\",src:\"/static/images/2021/airflow/example_workflow.png\",width:\"583\",height:\"100\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Pretty simple workflow, But there are some useful concepts that I will explain as we go.\"}),`\n`,(0,e.jsx)(n.p,{children:\"So let's start.\"}),`\n`,(0,e.jsxs)(n.h1,{id:\"running-apache-airflow-with-docker\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#running-apache-airflow-with-docker\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Running Apache Airflow with Docker\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"The official Airflow site provides a \",(0,e.jsx)(n.a,{href:\"https://airflow.apache.org/docs/apache-airflow/stable/start/docker.html#docker-compose-yaml\",children:\"docker-compose file\"}),\" with all the components needed to run Airflow. Once you download the docker-compose file, You can start it using the docker-compose command.\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`docker-compose up -d\n`})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Once your containers are up and running, a\",(0,e.jsx)(n.code,{children:\"dags\"}),\" folder is created on your local machine where you placed the docker-compose.yml file. We are going to use this \",(0,e.jsx)(n.code,{children:\"dags\"}),\" folder to place our python workflows. You can access the Airflow web UI using the URL \",(0,e.jsx)(n.code,{children:\"localhost:8080\"})]}),`\n`,(0,e.jsxs)(n.h1,{id:\"creating-your-dag-definition\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#creating-your-dag-definition\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Creating your DAG Definition\"]}),`\n`,(0,e.jsx)(n.p,{children:\"First, we will create a skeleton of the workflow, i.e, in this case, is the DAG definition.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" airflow\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"models \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),` DAG\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"default_args \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'start_date'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" datetime\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2020\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"with\"}),\" DAG\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'user_processing'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"         schedule_interval\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'@daily'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"         default_args\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"default_args\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"         catchup\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token boolean\",children:\"False\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),\" dag\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"With this, you just created a new workflow, But without any tasks to be executed. The first parameter is the name of the DAG, followed by the schedule you want it to be triggered. Then you set some default arguments like \",(0,e.jsx)(n.code,{children:\"start_date\"}),\"telling when actually the DAG can start to trigger.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Next, let's create our first task.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now, to check if our URL is reachable, we are going to use a sensor operator. In this case, it's an \",(0,e.jsx)(n.code,{children:\"HttpSensor\"}),\" operator.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"with\"}),\" DAG\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'user_content_processing'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"         schedule_interval\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'@daily'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"         default_args\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"default_args\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),\" dag\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    is_api_available \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" HttpSensor\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        task_id\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'is_api_available'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        http_conn_id\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'user_api'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        endpoint\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'api/'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"To create the HttpSensor operator, We provide it with a task id, HTTP connection id, and endpoint. The task id identifies the task in the DAG, and the endpoint identifies the API to fetch. Now the third parameter i.e \",(0,e.jsx)(n.code,{children:\"http_conn_id\"}),\" will require something to be explained.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Airflow provides a mechanism to create and store some configurations that you can use across workflows. One such type is configuring \\u201CConnections\\u201D. Here you can provide various connections like AWS connections, ElasticSearch connection, Kubernetes cluster connections, etc.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"In our case, we would be using the HTTP connection option. Here we would provide the URL we want to trigger and setting the connection id to \",(0,e.jsx)(n.code,{children:\"user_api\"}),\" .We want to call the URL \",(0,e.jsx)(n.a,{href:\"https://randomuser.me/api/\",children:\"https://randomuser.me/api/\"}),\", which will return a JSON response of some random user information.\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(c,{alt:\"Airflow Connection Creation\",src:\"/static/images/2021/airflow/airflow-http-connection.png\",width:\"661\",height:\"411\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Finally, with this configured, the task is ready to make a call to the URL with the endpoint provided.\"}),`\n`,(0,e.jsx)(n.p,{children:\"So with that, We just created our first task and learned some concepts.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(c,{alt:\"Airflow DAG task\",src:\"/static/images/2021/airflow/airflow-first-dag-task.png\",width:\"419\",height:\"342\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now, once the first task execution succeeds, we want to execute the task that will make the actual call to get user details. For this, we are going to make use of an HttpOperator called \",(0,e.jsx)(n.code,{children:\"SimpleHttpOperator\"}),\".\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"is_api_available \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" HttpSensor\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"extracting_user \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" SimpleHttpOperator\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    task_id\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'extracting_user'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    http_conn_id\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'user_api'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    endpoint\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'api/'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    method\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'GET'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"As you can see, we have the \",(0,e.jsx)(n.code,{children:\"task_id\"}),\"to identify this task, the \",(0,e.jsx)(n.code,{children:\"http_conn_id\"}),\" we spoke about before, the endpoint, and the method you want to execute.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"That's it!\"}),`\n`,(0,e.jsx)(n.p,{children:\"Now you must be wondering what happens to the response. For this let's look into another concept called Xcoms\"}),`\n`,(0,e.jsxs)(n.h1,{id:\"xcoms\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#xcoms\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Xcoms\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Xcoms is a way you can share data between your tasks. It basically stores key-value pairs of the information you want to store that can be accessed by other tasks in a DAG.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"The SimpleHttpOperator stores the response inside these Xcoms. Hence we will use another task to retrieve the value and process it. You can read more about Xcoms \",(0,e.jsx)(n.a,{href:\"https://airflow.apache.org/docs/apache-airflow/stable/concepts.html?highlight=xcom#xcoms\",children:\"here\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Once the data is fetched, We are going to create a processor, which will process the data that was pushed into Xcoms by the previous task. We will do this using a python function and hence the new operator that we are going to use is the \",(0,e.jsx)(n.code,{children:\"PythonOperator\"}),\".\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"fetch_user \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" SimpleHttpOperator\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"processing_user \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" PythonOperator\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    task_id\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'processing_user'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    python_callable\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`_processing_user\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(c,{alt:\"DAG Tasks\",src:\"/static/images/2021/airflow/airflow-dag-tasks.png\",width:\"687\",height:\"365\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"The \",(0,e.jsx)(n.code,{children:\"PythonOperator\"}),\" is a simple operator, that takes the \",(0,e.jsx)(n.code,{children:\"task_id\"}),\" and a python callable function. Let\\u2019s look at the function.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"def\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"_processing_user\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"ti\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    users_txt \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" ti\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"xcom_pull\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"task_ids\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"extracting_user\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    users \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" json\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"loads\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"users_txt\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"not\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"len\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"users\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"or\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'results'\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"not\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"in\"}),\" users\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"raise\"}),\" ValueError\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"User is empty\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    user \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" users\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'results'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    user_map \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'firstname'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'name'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'first'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'lastname'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'name'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'last'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    processed_user \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" json_normalize\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user_map\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    Variable\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token builtin\",children:\"set\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"user\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" processed_user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"So this function receives a Task Instance (referred as \",(0,e.jsx)(n.code,{children:\"ti\"}),\"). We use this task instance to get the information that our task \",(0,e.jsx)(n.code,{children:\"extracting_user\"}),\" has pushed to Xcoms, using \",(0,e.jsx)(n.code,{children:\"xcom_pull\"}),\" call. We then validate the input and extract some fields as a dictionary. Finally, we normalize the dictionary and add it to something called \",(0,e.jsx)(n.code,{children:\"Variables\"}),\". Let\\u2019s look at what are Variables.\"]}),`\n`,(0,e.jsxs)(n.h1,{id:\"variables\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#variables\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Variables\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Variables are a way to store and extract some values that you would like to use across any DAG. It's basically a key-value store of arbitrary data. You can read more in detail about it \",(0,e.jsx)(n.a,{href:\"https://airflow.apache.org/docs/apache-airflow/stable/concepts.html?highlight=xcom#variables\",children:\"here\"}),\".\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now that we have stored the values inside Variables, Let print them to the logs using the \",(0,e.jsx)(n.code,{children:\"echo\"}),\" command. To do this we are going to use the \",(0,e.jsx)(n.code,{children:\"BashOperator\"})]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"%\"}),\" raw \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"%\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"processing_user \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" PythonOperator\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"   \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"print_user \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" BashOperator\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    task_id\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'log_user'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    bash_command\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:`'echo \"{{ var.value.user }}\"'`}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"%\"}),\" endraw \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"%\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"In this, I will explain to you another important concept called Templating.\"}),`\n`,(0,e.jsxs)(n.h1,{id:\"templating\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#templating\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Templating\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Airflow uses \",(0,e.jsx)(n.a,{href:\"https://jinja.palletsprojects.com/\",children:\"Jinja Templating\"}),\". As you have seen in the code above, I have used curly braces which allow me to materialize some values. In this case, I have extracted the \",(0,e.jsx)(n.code,{children:\"user\"}),\" key from Variables (using \",(0,e.jsx)(n.code,{children:\"var\"}),\" ) which I had stored using the previous task.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now how would you know if the particular operator supports templating? For this, you can search for \\u201Ctemplate_fields\\u201D in the API reference of the operator, Which will tell you which fields support templating. e.g You can have a look at the HttpSensor operator reference \",(0,e.jsx)(n.a,{href:\"https://airflow.apache.org/docs/apache-airflow-providers-http/stable/_api/airflow/providers/http/sensors/http/index.html\",children:\"here\"}),\".\"]}),`\n`,(0,e.jsxs)(n.h1,{id:\"ordering-your-tasks\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#ordering-your-tasks\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Ordering Your Tasks\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now, With all of this, we have created all the tasks instances. But we still have to order the tasks. To do this, we make use of the \",(0,e.jsx)(n.code,{children:\"\u003c\u003c\"}),\" operator. You define it as\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsx)(n.code,{className:\"language-python code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Task \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\u003c\"}),\" Task \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"This means Task 1 will run before Task 2. In our case, we will order this as\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsx)(n.code,{className:\"language-python code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"is_api_available \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\u003e\"}),\" fetch_user \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\u003e\"}),\" processing_user \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\u003e\"}),` print_user\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"And there we go. We just created a simple Airflow DAG workflow from scratch covering some of the important concepts of Airflow. Now, enable the DAG and hit run. It will start executing.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(c,{alt:\"Apache Airflow Successful Execution\",src:\"/static/images/2021/airflow/airflow-dag-successful-run.png\",width:\"1340\",height:\"544\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"As usual, I have uploaded the code on \",(0,e.jsx)(n.a,{href:\"https://github.com/amrutprabhu/airflow-workouts/blob/master/dags/user_data_processing.py\",children:\"GitHub\"}),\". :)\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Enjoy!!\"})]})}}var b=y;function _(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return v;})();\n;return Component;","toc":[{"value":"Introduction","url":"#introduction","depth":1},{"value":"Key Concepts","url":"#key-concepts","depth":1},{"value":"Creating an Airflow DAG.","url":"#creating-an-airflow-dag","depth":1},{"value":"Running Apache Airflow with Docker","url":"#running-apache-airflow-with-docker","depth":1},{"value":"Creating your DAG Definition","url":"#creating-your-dag-definition","depth":1},{"value":"Xcoms","url":"#xcoms","depth":1},{"value":"Variables","url":"#variables","depth":1},{"value":"Templating","url":"#templating","depth":1},{"value":"Ordering Your Tasks","url":"#ordering-your-tasks","depth":1}],"frontMatter":{"readingTime":{"text":"9 min read","minutes":8.41,"time":504600,"words":1682},"slug":"2020/apache-airflow-2-0-practical-jump-start","fileName":"2020/apache-airflow-2-0-practical-jump-start.md","title":"Apache Airflow 2.0: A Practical Jump Start","author":"Amrut Prabhu","categories":"","tags":["python","airflow","Java"],"image":"airflow/airflow-cover.jpg","photo-credits":"https://unsplash.com/photos/BpEOwR57QEg","applaud-link":"apache-airflow-2-0-practical-jump-start.json","date":"2021-04-28T00:00:00.000Z","draft":false,"summary":"In this article, I would like to give you a jump-start to understand the basic concepts and create a workflow pipeline from scratch.","imageUrl":"/static/images/2021/airflow/airflow-cover.jpg","actualUrl":"2020/apache-airflow-2-0-practical-jump-start","customUrl":"apache-airflow-2-0-practical-jump-start"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.875,"time":52500,"words":175},"slug":["default"],"fileName":"default.md","name":"Amrut Prabhu","avatar":"/static/images/avatar-small.jpg","avatarBig":"/static/images/avatar-big.jpg","occupation":"Staff Engineer","company":"Personal","email":"contact@refactorfirst.com","twitter":"https://twitter.com/amrutprabhu42","linkedin":"https://www.linkedin.com/in/amrut-prabhu-722baa65/","github":"https://github.com/amrutprabhu","customUrl":"default","actualUrl":"default","date":null}],"prev":{"title":"Spring Boot: API First Design","author":"Amrut Prabhu","categories":"","tags":["Spring Boot","Java","Open API 3","Swagger"],"image":"blog-api-first/cover.jpg","photo-credits":"https://unsplash.com/photos/bb-ys3oFql4","applaud-link":"spring-boot-api-first-design.json","date":"2021-03-21T00:00:00.000Z","draft":false,"summary":"Here we take a practical approach to API first design with an example using Open API 3 specification","imageUrl":"/static/images/2021/blog-api-first/cover.jpg","actualUrl":"2020/spring-boot-api-first-design","customUrl":"spring-boot-api-first-design","slug":"spring-boot-api-first-design"},"next":{"title":"Kind - A New Kubernetes Cluster","author":"Amrut Prabhu","categories":"","tags":["kubernetes","Java"],"image":"kind/kind-kubernetes.png","photo-credits":null,"applaud-link":"kind-kubernetes-cluster.json","date":"2021-05-13T00:00:00.000Z","draft":false,"summary":"Here we explore how to create a kubernetes cluster on your local machine","imageUrl":"/static/images/2021/kind/kind-kubernetes.png","actualUrl":"2020/kind-kubernetes-cluster","customUrl":"kind-kubernetes-cluster","slug":"kind-kubernetes-cluster"}},"__N_SSG":true},"page":"/[slug]","query":{"slug":"apache-airflow-2-0-practical-jump-start"},"buildId":"LNr9i4u3rmH-bZFWF6mqj","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>